<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.53">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="referrer" content="no-referrer"><meta name="baidu-site-verification" content="code-iW58SZ4SVS"><meta name="google-site-verification" content="XVRUSmXYuJfszJ50uwUc7phaeM7EtTrtaIzFGPROgEA"><link rel="icon" href="/favicon.ico"><script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?**********************";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);

    // 引入谷歌,不需要可删除这段
    var hm1 = document.createElement("script");
    hm1.src = "https://www.googletagmanager.com/gtag/js?id=UA-00000000-1";
    var s1 = document.getElementsByTagName("script")[0];
    s1.parentNode.insertBefore(hm1, s1);
    })();

    // 谷歌加载,不需要可删除
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-00000000-1');
</script><script>
      (function() {
         if (location.href.indexOf('github.io') > -1 || location.href.indexOf('gitee.io') > -1) {
             location.href = 'https://ts.yayujs.com'
         }
      })();
      </script><title>05 【nodejs内置模块（上）】 | Ustinian-Hanyu</title><meta name="description" content="Ustinian-Hanyu的博客站点">
    <link rel="preload" href="/assets/style.0f538d74.css" as="style" /><link rel="stylesheet" href="/assets/style.0f538d74.css" />
    <link rel="modulepreload" href="/assets/app.713299e2.js"><link rel="modulepreload" href="/assets/05.html.23c58929.js"><link rel="modulepreload" href="/assets/05.html.7b2b25de.js"><link rel="prefetch" href="/assets/index.html.36cf5306.js" as="script" /><link rel="prefetch" href="/assets/01.html.e18fceb6.js" as="script" /><link rel="prefetch" href="/assets/02.html.6e3feacf.js" as="script" /><link rel="prefetch" href="/assets/03.html.7add46ac.js" as="script" /><link rel="prefetch" href="/assets/04.html.216af4d3.js" as="script" /><link rel="prefetch" href="/assets/05.html.d0b548c7.js" as="script" /><link rel="prefetch" href="/assets/01.html.5aed415f.js" as="script" /><link rel="prefetch" href="/assets/02.html.51d05571.js" as="script" /><link rel="prefetch" href="/assets/01.html.c5c06f6e.js" as="script" /><link rel="prefetch" href="/assets/02.html.aeccc2af.js" as="script" /><link rel="prefetch" href="/assets/03.html.1f5bed82.js" as="script" /><link rel="prefetch" href="/assets/04.html.52070d67.js" as="script" /><link rel="prefetch" href="/assets/05.html.d2ee2b84.js" as="script" /><link rel="prefetch" href="/assets/06.html.7099f6b5.js" as="script" /><link rel="prefetch" href="/assets/07.html.352a328d.js" as="script" /><link rel="prefetch" href="/assets/08.html.52bd7c21.js" as="script" /><link rel="prefetch" href="/assets/09.html.5ce4b947.js" as="script" /><link rel="prefetch" href="/assets/10.html.a148cfeb.js" as="script" /><link rel="prefetch" href="/assets/11.html.8219e781.js" as="script" /><link rel="prefetch" href="/assets/12.html.964b49ed.js" as="script" /><link rel="prefetch" href="/assets/13.html.929446a7.js" as="script" /><link rel="prefetch" href="/assets/14.html.d9e6ac99.js" as="script" /><link rel="prefetch" href="/assets/01.html.16df6ce9.js" as="script" /><link rel="prefetch" href="/assets/02.html.29fe9bb0.js" as="script" /><link rel="prefetch" href="/assets/03.html.90b25116.js" as="script" /><link rel="prefetch" href="/assets/04.html.4117c5bf.js" as="script" /><link rel="prefetch" href="/assets/01.html.ee1513a9.js" as="script" /><link rel="prefetch" href="/assets/01.html.e959d328.js" as="script" /><link rel="prefetch" href="/assets/02.html.3e462183.js" as="script" /><link rel="prefetch" href="/assets/03.html.49902550.js" as="script" /><link rel="prefetch" href="/assets/04.html.f5343e0e.js" as="script" /><link rel="prefetch" href="/assets/05.html.5f7f030b.js" as="script" /><link rel="prefetch" href="/assets/06.html.4a081639.js" as="script" /><link rel="prefetch" href="/assets/07.html.0005fd09.js" as="script" /><link rel="prefetch" href="/assets/08.html.e8fae754.js" as="script" /><link rel="prefetch" href="/assets/09.html.0edbe6b0.js" as="script" /><link rel="prefetch" href="/assets/10.html.e9e2b2b6.js" as="script" /><link rel="prefetch" href="/assets/11.html.5a89e453.js" as="script" /><link rel="prefetch" href="/assets/12.html.01374214.js" as="script" /><link rel="prefetch" href="/assets/13.html.606d574e.js" as="script" /><link rel="prefetch" href="/assets/14.html.0f6c24a8.js" as="script" /><link rel="prefetch" href="/assets/15.html.c4dd81e9.js" as="script" /><link rel="prefetch" href="/assets/16.html.a0e1ec55.js" as="script" /><link rel="prefetch" href="/assets/17.html.74bd2ef1.js" as="script" /><link rel="prefetch" href="/assets/18.html.a9dfb6d0.js" as="script" /><link rel="prefetch" href="/assets/19.html.baec3966.js" as="script" /><link rel="prefetch" href="/assets/20.html.d6c21013.js" as="script" /><link rel="prefetch" href="/assets/21.html.dfdc724c.js" as="script" /><link rel="prefetch" href="/assets/22.html.3a14c3de.js" as="script" /><link rel="prefetch" href="/assets/23.html.5f2cc8b5.js" as="script" /><link rel="prefetch" href="/assets/24.html.6484bf02.js" as="script" /><link rel="prefetch" href="/assets/25.html.5d13206c.js" as="script" /><link rel="prefetch" href="/assets/26.html.66bddbe9.js" as="script" /><link rel="prefetch" href="/assets/27.html.0422bb75.js" as="script" /><link rel="prefetch" href="/assets/28.html.20c6cd1e.js" as="script" /><link rel="prefetch" href="/assets/29.html.23a98e85.js" as="script" /><link rel="prefetch" href="/assets/30.html.fefe2a40.js" as="script" /><link rel="prefetch" href="/assets/31.html.3f4075fc.js" as="script" /><link rel="prefetch" href="/assets/32.html.ff0dbd3f.js" as="script" /><link rel="prefetch" href="/assets/33.html.ae316991.js" as="script" /><link rel="prefetch" href="/assets/34.html.a2144af5.js" as="script" /><link rel="prefetch" href="/assets/35.html.0b79a268.js" as="script" /><link rel="prefetch" href="/assets/36.html.1c56d09b.js" as="script" /><link rel="prefetch" href="/assets/01.html.ca403003.js" as="script" /><link rel="prefetch" href="/assets/02.html.503aa70a.js" as="script" /><link rel="prefetch" href="/assets/03.html.1080c21d.js" as="script" /><link rel="prefetch" href="/assets/04.html.96f03201.js" as="script" /><link rel="prefetch" href="/assets/05.html.ed19fae8.js" as="script" /><link rel="prefetch" href="/assets/06.html.c3721440.js" as="script" /><link rel="prefetch" href="/assets/07.html.b9a01777.js" as="script" /><link rel="prefetch" href="/assets/08.html.acc829da.js" as="script" /><link rel="prefetch" href="/assets/09.html.815e3725.js" as="script" /><link rel="prefetch" href="/assets/10.html.ccc99572.js" as="script" /><link rel="prefetch" href="/assets/11.html.c7770a3b.js" as="script" /><link rel="prefetch" href="/assets/01.html.005e1906.js" as="script" /><link rel="prefetch" href="/assets/01.html.6da50d28.js" as="script" /><link rel="prefetch" href="/assets/02.html.3b52b752.js" as="script" /><link rel="prefetch" href="/assets/03.html.da5fb638.js" as="script" /><link rel="prefetch" href="/assets/04.html.3f1efbe3.js" as="script" /><link rel="prefetch" href="/assets/05.html.f645d496.js" as="script" /><link rel="prefetch" href="/assets/06.html.75276adf.js" as="script" /><link rel="prefetch" href="/assets/07.html.2afb6c5e.js" as="script" /><link rel="prefetch" href="/assets/08.html.853f5433.js" as="script" /><link rel="prefetch" href="/assets/09.html.8751820d.js" as="script" /><link rel="prefetch" href="/assets/10.html.bad514a3.js" as="script" /><link rel="prefetch" href="/assets/11.html.a55c8ec0.js" as="script" /><link rel="prefetch" href="/assets/01.html.f0c2f1c3.js" as="script" /><link rel="prefetch" href="/assets/02.html.d18f4fec.js" as="script" /><link rel="prefetch" href="/assets/03.html.72564f95.js" as="script" /><link rel="prefetch" href="/assets/04.html.b52ebbba.js" as="script" /><link rel="prefetch" href="/assets/06.html.c8bab393.js" as="script" /><link rel="prefetch" href="/assets/07.html.2aaa9ac2.js" as="script" /><link rel="prefetch" href="/assets/08.html.60630c88.js" as="script" /><link rel="prefetch" href="/assets/09.html.bf1c01e3.js" as="script" /><link rel="prefetch" href="/assets/10.html.d15d0c07.js" as="script" /><link rel="prefetch" href="/assets/11.html.1ddc59f5.js" as="script" /><link rel="prefetch" href="/assets/12.html.a86069d6.js" as="script" /><link rel="prefetch" href="/assets/13.html.f182b77b.js" as="script" /><link rel="prefetch" href="/assets/01.html.1e5ffe5f.js" as="script" /><link rel="prefetch" href="/assets/02.html.869fb59b.js" as="script" /><link rel="prefetch" href="/assets/03.html.ee16cdcd.js" as="script" /><link rel="prefetch" href="/assets/04.html.44538d71.js" as="script" /><link rel="prefetch" href="/assets/05.html.9b0d7a1d.js" as="script" /><link rel="prefetch" href="/assets/06.html.55afe618.js" as="script" /><link rel="prefetch" href="/assets/07.html.d78f6174.js" as="script" /><link rel="prefetch" href="/assets/08.html.f0f8c260.js" as="script" /><link rel="prefetch" href="/assets/09.html.7286f8b3.js" as="script" /><link rel="prefetch" href="/assets/10.html.f78e9f04.js" as="script" /><link rel="prefetch" href="/assets/11.html.25d410e1.js" as="script" /><link rel="prefetch" href="/assets/12.html.5bbc37c8.js" as="script" /><link rel="prefetch" href="/assets/13.html.c20194e5.js" as="script" /><link rel="prefetch" href="/assets/14.html.a1275448.js" as="script" /><link rel="prefetch" href="/assets/15.html.dbbd8396.js" as="script" /><link rel="prefetch" href="/assets/16.html.d27a34ec.js" as="script" /><link rel="prefetch" href="/assets/17.html.a1c08ebd.js" as="script" /><link rel="prefetch" href="/assets/18.html.cb9ccc46.js" as="script" /><link rel="prefetch" href="/assets/19.html.7fc65f8d.js" as="script" /><link rel="prefetch" href="/assets/01.html.b9a42d3c.js" as="script" /><link rel="prefetch" href="/assets/02.html.4a93c931.js" as="script" /><link rel="prefetch" href="/assets/03.html.5a562efb.js" as="script" /><link rel="prefetch" href="/assets/04.html.e658a39b.js" as="script" /><link rel="prefetch" href="/assets/05.html.11c27443.js" as="script" /><link rel="prefetch" href="/assets/06.html.90c13743.js" as="script" /><link rel="prefetch" href="/assets/07.html.d7b3c97d.js" as="script" /><link rel="prefetch" href="/assets/08.html.04a6833f.js" as="script" /><link rel="prefetch" href="/assets/01.html.1346e6ad.js" as="script" /><link rel="prefetch" href="/assets/02.html.bd271d59.js" as="script" /><link rel="prefetch" href="/assets/03.html.4db806ee.js" as="script" /><link rel="prefetch" href="/assets/04.html.2a220608.js" as="script" /><link rel="prefetch" href="/assets/01.html.8fb2c9c0.js" as="script" /><link rel="prefetch" href="/assets/02.html.1177d3de.js" as="script" /><link rel="prefetch" href="/assets/03.html.da4b0400.js" as="script" /><link rel="prefetch" href="/assets/04.html.6681f4de.js" as="script" /><link rel="prefetch" href="/assets/05.html.0480a424.js" as="script" /><link rel="prefetch" href="/assets/06.html.fc6b36c1.js" as="script" /><link rel="prefetch" href="/assets/07.html.c2cd043e.js" as="script" /><link rel="prefetch" href="/assets/08.html.b7e996c3.js" as="script" /><link rel="prefetch" href="/assets/09.html.3ec7a41a.js" as="script" /><link rel="prefetch" href="/assets/01.html.a4a11bda.js" as="script" /><link rel="prefetch" href="/assets/02.html.68dfb4b0.js" as="script" /><link rel="prefetch" href="/assets/03.html.0ec2f10a.js" as="script" /><link rel="prefetch" href="/assets/04.html.51f41f4a.js" as="script" /><link rel="prefetch" href="/assets/05.html.e831cdab.js" as="script" /><link rel="prefetch" href="/assets/06.html.e9613e4a.js" as="script" /><link rel="prefetch" href="/assets/07.html.86120000.js" as="script" /><link rel="prefetch" href="/assets/08.html.0b327f97.js" as="script" /><link rel="prefetch" href="/assets/09.html.d4f54ab4.js" as="script" /><link rel="prefetch" href="/assets/10.html.1e858492.js" as="script" /><link rel="prefetch" href="/assets/11.html.78ac1a04.js" as="script" /><link rel="prefetch" href="/assets/01.html.edf97d7c.js" as="script" /><link rel="prefetch" href="/assets/02.html.806ebf7f.js" as="script" /><link rel="prefetch" href="/assets/03.html.ef2b87d8.js" as="script" /><link rel="prefetch" href="/assets/04.html.7c497e5a.js" as="script" /><link rel="prefetch" href="/assets/05.html.45a920f2.js" as="script" /><link rel="prefetch" href="/assets/06.html.a6a766ad.js" as="script" /><link rel="prefetch" href="/assets/07.html.5aa39574.js" as="script" /><link rel="prefetch" href="/assets/08.html.9301de7c.js" as="script" /><link rel="prefetch" href="/assets/09.html.9c483191.js" as="script" /><link rel="prefetch" href="/assets/10.html.4badd134.js" as="script" /><link rel="prefetch" href="/assets/11.html.ba017c55.js" as="script" /><link rel="prefetch" href="/assets/12.html.90726a26.js" as="script" /><link rel="prefetch" href="/assets/13.html.68a49682.js" as="script" /><link rel="prefetch" href="/assets/14.html.3f06992d.js" as="script" /><link rel="prefetch" href="/assets/15.html.12442c79.js" as="script" /><link rel="prefetch" href="/assets/16.html.3ff44d65.js" as="script" /><link rel="prefetch" href="/assets/01.html.c67425b7.js" as="script" /><link rel="prefetch" href="/assets/02.html.e1771c13.js" as="script" /><link rel="prefetch" href="/assets/03.html.6a003d2f.js" as="script" /><link rel="prefetch" href="/assets/04.html.b926644e.js" as="script" /><link rel="prefetch" href="/assets/06.html.26eaa479.js" as="script" /><link rel="prefetch" href="/assets/07.html.66677dac.js" as="script" /><link rel="prefetch" href="/assets/08.html.c49be50c.js" as="script" /><link rel="prefetch" href="/assets/09.html.60d64443.js" as="script" /><link rel="prefetch" href="/assets/10.html.44a07de8.js" as="script" /><link rel="prefetch" href="/assets/11.html.d5d75e72.js" as="script" /><link rel="prefetch" href="/assets/12.html.8c95b385.js" as="script" /><link rel="prefetch" href="/assets/13.html.9aac6555.js" as="script" /><link rel="prefetch" href="/assets/14.html.ea9c5fde.js" as="script" /><link rel="prefetch" href="/assets/15.html.6015268f.js" as="script" /><link rel="prefetch" href="/assets/16.html.3746800d.js" as="script" /><link rel="prefetch" href="/assets/17.html.fd69b26d.js" as="script" /><link rel="prefetch" href="/assets/01.html.ea615a24.js" as="script" /><link rel="prefetch" href="/assets/02.html.14edd753.js" as="script" /><link rel="prefetch" href="/assets/03.html.1ff38909.js" as="script" /><link rel="prefetch" href="/assets/04.html.9626350d.js" as="script" /><link rel="prefetch" href="/assets/404.html.c3e557d0.js" as="script" /><link rel="prefetch" href="/assets/index.html.c7a6d3a3.js" as="script" /><link rel="prefetch" href="/assets/01.html.a8a0413b.js" as="script" /><link rel="prefetch" href="/assets/02.html.ac14144e.js" as="script" /><link rel="prefetch" href="/assets/03.html.123aca85.js" as="script" /><link rel="prefetch" href="/assets/04.html.c562edc2.js" as="script" /><link rel="prefetch" href="/assets/05.html.8dc3293d.js" as="script" /><link rel="prefetch" href="/assets/01.html.acd4a55c.js" as="script" /><link rel="prefetch" href="/assets/02.html.462988b6.js" as="script" /><link rel="prefetch" href="/assets/01.html.318048d1.js" as="script" /><link rel="prefetch" href="/assets/02.html.e5d025fd.js" as="script" /><link rel="prefetch" href="/assets/03.html.01defa36.js" as="script" /><link rel="prefetch" href="/assets/04.html.c989009a.js" as="script" /><link rel="prefetch" href="/assets/05.html.55b0d7ba.js" as="script" /><link rel="prefetch" href="/assets/06.html.67a06f7e.js" as="script" /><link rel="prefetch" href="/assets/07.html.f9ca3326.js" as="script" /><link rel="prefetch" href="/assets/08.html.68b3ab83.js" as="script" /><link rel="prefetch" href="/assets/09.html.f52457ab.js" as="script" /><link rel="prefetch" href="/assets/10.html.591ea79f.js" as="script" /><link rel="prefetch" href="/assets/11.html.e931c61e.js" as="script" /><link rel="prefetch" href="/assets/12.html.f9ce6b3e.js" as="script" /><link rel="prefetch" href="/assets/13.html.b6e6f195.js" as="script" /><link rel="prefetch" href="/assets/14.html.d6e53979.js" as="script" /><link rel="prefetch" href="/assets/01.html.f87ef756.js" as="script" /><link rel="prefetch" href="/assets/02.html.6a7ee48c.js" as="script" /><link rel="prefetch" href="/assets/03.html.2ab6dbe7.js" as="script" /><link rel="prefetch" href="/assets/04.html.747d1976.js" as="script" /><link rel="prefetch" href="/assets/01.html.665d48a5.js" as="script" /><link rel="prefetch" href="/assets/01.html.06900b2c.js" as="script" /><link rel="prefetch" href="/assets/02.html.38db6f8f.js" as="script" /><link rel="prefetch" href="/assets/03.html.7a88f937.js" as="script" /><link rel="prefetch" href="/assets/04.html.5af54757.js" as="script" /><link rel="prefetch" href="/assets/05.html.26ac102e.js" as="script" /><link rel="prefetch" href="/assets/06.html.359b3f0e.js" as="script" /><link rel="prefetch" href="/assets/07.html.96f40d6a.js" as="script" /><link rel="prefetch" href="/assets/08.html.2dfd6af4.js" as="script" /><link rel="prefetch" href="/assets/09.html.94407773.js" as="script" /><link rel="prefetch" href="/assets/10.html.eccb0700.js" as="script" /><link rel="prefetch" href="/assets/11.html.3a86c7f9.js" as="script" /><link rel="prefetch" href="/assets/12.html.0e86c434.js" as="script" /><link rel="prefetch" href="/assets/13.html.259dca64.js" as="script" /><link rel="prefetch" href="/assets/14.html.3584854e.js" as="script" /><link rel="prefetch" href="/assets/15.html.abd32bec.js" as="script" /><link rel="prefetch" href="/assets/16.html.ebfd73cf.js" as="script" /><link rel="prefetch" href="/assets/17.html.e1d64208.js" as="script" /><link rel="prefetch" href="/assets/18.html.2340d2e5.js" as="script" /><link rel="prefetch" href="/assets/19.html.05572bf6.js" as="script" /><link rel="prefetch" href="/assets/20.html.860374df.js" as="script" /><link rel="prefetch" href="/assets/21.html.b7bdae4f.js" as="script" /><link rel="prefetch" href="/assets/22.html.72bb6454.js" as="script" /><link rel="prefetch" href="/assets/23.html.18157658.js" as="script" /><link rel="prefetch" href="/assets/24.html.a8695376.js" as="script" /><link rel="prefetch" href="/assets/25.html.294b2a77.js" as="script" /><link rel="prefetch" href="/assets/26.html.9f549ff4.js" as="script" /><link rel="prefetch" href="/assets/27.html.bb001054.js" as="script" /><link rel="prefetch" href="/assets/28.html.d155894e.js" as="script" /><link rel="prefetch" href="/assets/29.html.d16bbcd4.js" as="script" /><link rel="prefetch" href="/assets/30.html.10d614a5.js" as="script" /><link rel="prefetch" href="/assets/31.html.a059362b.js" as="script" /><link rel="prefetch" href="/assets/32.html.6da91f16.js" as="script" /><link rel="prefetch" href="/assets/33.html.f44735f7.js" as="script" /><link rel="prefetch" href="/assets/34.html.b779e2bc.js" as="script" /><link rel="prefetch" href="/assets/35.html.981be978.js" as="script" /><link rel="prefetch" href="/assets/36.html.b7806a8c.js" as="script" /><link rel="prefetch" href="/assets/01.html.063e91b9.js" as="script" /><link rel="prefetch" href="/assets/02.html.e9f8b0ac.js" as="script" /><link rel="prefetch" href="/assets/03.html.2e706940.js" as="script" /><link rel="prefetch" href="/assets/04.html.34dcb6dd.js" as="script" /><link rel="prefetch" href="/assets/05.html.72ab1daf.js" as="script" /><link rel="prefetch" href="/assets/06.html.286ba4b4.js" as="script" /><link rel="prefetch" href="/assets/07.html.177b8a1c.js" as="script" /><link rel="prefetch" href="/assets/08.html.035f60fd.js" as="script" /><link rel="prefetch" href="/assets/09.html.3c6a5b6f.js" as="script" /><link rel="prefetch" href="/assets/10.html.686e11ab.js" as="script" /><link rel="prefetch" href="/assets/11.html.91f65560.js" as="script" /><link rel="prefetch" href="/assets/01.html.e0bc94d5.js" as="script" /><link rel="prefetch" href="/assets/01.html.f8a8d080.js" as="script" /><link rel="prefetch" href="/assets/02.html.45882581.js" as="script" /><link rel="prefetch" href="/assets/03.html.6ac0dfc0.js" as="script" /><link rel="prefetch" href="/assets/04.html.99307815.js" as="script" /><link rel="prefetch" href="/assets/05.html.d70026d2.js" as="script" /><link rel="prefetch" href="/assets/06.html.494ccaa8.js" as="script" /><link rel="prefetch" href="/assets/07.html.287249a8.js" as="script" /><link rel="prefetch" href="/assets/08.html.735f3a33.js" as="script" /><link rel="prefetch" href="/assets/09.html.d5352eb4.js" as="script" /><link rel="prefetch" href="/assets/10.html.6a141707.js" as="script" /><link rel="prefetch" href="/assets/11.html.0f39a3bb.js" as="script" /><link rel="prefetch" href="/assets/01.html.d1b777ee.js" as="script" /><link rel="prefetch" href="/assets/02.html.0c56367f.js" as="script" /><link rel="prefetch" href="/assets/03.html.e6246938.js" as="script" /><link rel="prefetch" href="/assets/04.html.91bfef9f.js" as="script" /><link rel="prefetch" href="/assets/06.html.362381a6.js" as="script" /><link rel="prefetch" href="/assets/07.html.91139fac.js" as="script" /><link rel="prefetch" href="/assets/08.html.cba20256.js" as="script" /><link rel="prefetch" href="/assets/09.html.21d07c93.js" as="script" /><link rel="prefetch" href="/assets/10.html.19a42ec4.js" as="script" /><link rel="prefetch" href="/assets/11.html.aaace7c1.js" as="script" /><link rel="prefetch" href="/assets/12.html.5f5c2f68.js" as="script" /><link rel="prefetch" href="/assets/13.html.5159c55a.js" as="script" /><link rel="prefetch" href="/assets/01.html.01c4210b.js" as="script" /><link rel="prefetch" href="/assets/02.html.9736fd95.js" as="script" /><link rel="prefetch" href="/assets/03.html.7d73ade3.js" as="script" /><link rel="prefetch" href="/assets/04.html.dcae5e84.js" as="script" /><link rel="prefetch" href="/assets/05.html.77272c48.js" as="script" /><link rel="prefetch" href="/assets/06.html.0f483149.js" as="script" /><link rel="prefetch" href="/assets/07.html.1183f215.js" as="script" /><link rel="prefetch" href="/assets/08.html.dc00ac60.js" as="script" /><link rel="prefetch" href="/assets/09.html.ae7d6b51.js" as="script" /><link rel="prefetch" href="/assets/10.html.0130e389.js" as="script" /><link rel="prefetch" href="/assets/11.html.69d0188c.js" as="script" /><link rel="prefetch" href="/assets/12.html.13b73048.js" as="script" /><link rel="prefetch" href="/assets/13.html.32a48a18.js" as="script" /><link rel="prefetch" href="/assets/14.html.2a94dc78.js" as="script" /><link rel="prefetch" href="/assets/15.html.1602a436.js" as="script" /><link rel="prefetch" href="/assets/16.html.31419cd0.js" as="script" /><link rel="prefetch" href="/assets/17.html.8e6b0c5e.js" as="script" /><link rel="prefetch" href="/assets/18.html.59a41c10.js" as="script" /><link rel="prefetch" href="/assets/19.html.6fd402e0.js" as="script" /><link rel="prefetch" href="/assets/01.html.f8bd630b.js" as="script" /><link rel="prefetch" href="/assets/02.html.0c743022.js" as="script" /><link rel="prefetch" href="/assets/03.html.69814c98.js" as="script" /><link rel="prefetch" href="/assets/04.html.a19851d7.js" as="script" /><link rel="prefetch" href="/assets/05.html.fac94c79.js" as="script" /><link rel="prefetch" href="/assets/06.html.cb23676e.js" as="script" /><link rel="prefetch" href="/assets/07.html.60690af4.js" as="script" /><link rel="prefetch" href="/assets/08.html.8ff3419f.js" as="script" /><link rel="prefetch" href="/assets/01.html.48973942.js" as="script" /><link rel="prefetch" href="/assets/02.html.8ba32930.js" as="script" /><link rel="prefetch" href="/assets/03.html.742e71ff.js" as="script" /><link rel="prefetch" href="/assets/04.html.7f8e70b0.js" as="script" /><link rel="prefetch" href="/assets/01.html.6ce4d355.js" as="script" /><link rel="prefetch" href="/assets/02.html.6d460915.js" as="script" /><link rel="prefetch" href="/assets/03.html.3c94a368.js" as="script" /><link rel="prefetch" href="/assets/04.html.259efe86.js" as="script" /><link rel="prefetch" href="/assets/05.html.1617c5ec.js" as="script" /><link rel="prefetch" href="/assets/06.html.fbfee6d7.js" as="script" /><link rel="prefetch" href="/assets/07.html.caca6c0e.js" as="script" /><link rel="prefetch" href="/assets/08.html.41e12379.js" as="script" /><link rel="prefetch" href="/assets/09.html.42ad750b.js" as="script" /><link rel="prefetch" href="/assets/01.html.5f4a84f6.js" as="script" /><link rel="prefetch" href="/assets/02.html.fc3516b2.js" as="script" /><link rel="prefetch" href="/assets/03.html.5a3e18db.js" as="script" /><link rel="prefetch" href="/assets/04.html.47a51e9d.js" as="script" /><link rel="prefetch" href="/assets/05.html.ecfd04c6.js" as="script" /><link rel="prefetch" href="/assets/06.html.3e6325e3.js" as="script" /><link rel="prefetch" href="/assets/07.html.eb580a58.js" as="script" /><link rel="prefetch" href="/assets/08.html.0cb9c379.js" as="script" /><link rel="prefetch" href="/assets/09.html.6c0d7909.js" as="script" /><link rel="prefetch" href="/assets/10.html.c54b9e21.js" as="script" /><link rel="prefetch" href="/assets/11.html.64b12174.js" as="script" /><link rel="prefetch" href="/assets/01.html.4e7608b1.js" as="script" /><link rel="prefetch" href="/assets/02.html.c248248e.js" as="script" /><link rel="prefetch" href="/assets/03.html.f6caffb6.js" as="script" /><link rel="prefetch" href="/assets/04.html.181baee3.js" as="script" /><link rel="prefetch" href="/assets/05.html.3083e170.js" as="script" /><link rel="prefetch" href="/assets/06.html.2a5d116d.js" as="script" /><link rel="prefetch" href="/assets/07.html.eec333b1.js" as="script" /><link rel="prefetch" href="/assets/08.html.70acbe7c.js" as="script" /><link rel="prefetch" href="/assets/09.html.cf564fd8.js" as="script" /><link rel="prefetch" href="/assets/10.html.14274245.js" as="script" /><link rel="prefetch" href="/assets/11.html.07c803d4.js" as="script" /><link rel="prefetch" href="/assets/12.html.85ad40df.js" as="script" /><link rel="prefetch" href="/assets/13.html.00e74b3c.js" as="script" /><link rel="prefetch" href="/assets/14.html.de9c7ef6.js" as="script" /><link rel="prefetch" href="/assets/15.html.00b096ff.js" as="script" /><link rel="prefetch" href="/assets/16.html.557c3300.js" as="script" /><link rel="prefetch" href="/assets/01.html.b29d1e2f.js" as="script" /><link rel="prefetch" href="/assets/02.html.6372a67d.js" as="script" /><link rel="prefetch" href="/assets/03.html.f783ecb7.js" as="script" /><link rel="prefetch" href="/assets/04.html.4c332ba4.js" as="script" /><link rel="prefetch" href="/assets/06.html.a9761e54.js" as="script" /><link rel="prefetch" href="/assets/07.html.6c23d4f0.js" as="script" /><link rel="prefetch" href="/assets/08.html.ddded5c7.js" as="script" /><link rel="prefetch" href="/assets/09.html.32baadd2.js" as="script" /><link rel="prefetch" href="/assets/10.html.24e42559.js" as="script" /><link rel="prefetch" href="/assets/11.html.fd69b33a.js" as="script" /><link rel="prefetch" href="/assets/12.html.71fd68e6.js" as="script" /><link rel="prefetch" href="/assets/13.html.4ef7a947.js" as="script" /><link rel="prefetch" href="/assets/14.html.3bbe15f8.js" as="script" /><link rel="prefetch" href="/assets/15.html.3c1affc9.js" as="script" /><link rel="prefetch" href="/assets/16.html.6c444795.js" as="script" /><link rel="prefetch" href="/assets/17.html.7f268767.js" as="script" /><link rel="prefetch" href="/assets/01.html.cce25e09.js" as="script" /><link rel="prefetch" href="/assets/02.html.eabf1ba5.js" as="script" /><link rel="prefetch" href="/assets/03.html.2b9fd384.js" as="script" /><link rel="prefetch" href="/assets/04.html.2154b9e8.js" as="script" /><link rel="prefetch" href="/assets/404.html.d83d9bad.js" as="script" /><link rel="prefetch" href="/assets/giscus.c00a298d.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo.png" alt="Ustinian-Hanyu"><span class="site-name can-hide">Ustinian-Hanyu</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/index" class="" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/html+css/01" class="" aria-label="Html/Css"><!--[--><!--]--> Html/Css <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/js/01" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Css进阶</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/less/01" class="" aria-label="Less"><!--[--><!--]--> Less <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/sass/01" class="" aria-label="Sass"><!--[--><!--]--> Sass <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/tailwindcss/01" class="" aria-label="tailwindcss"><!--[--><!--]--> tailwindcss <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JS进阶</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/es6/01" class="" aria-label=" ES6"><!--[--><!--]-->  ES6 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/ajax/01" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/echarts/01" class="" aria-label="Echarts"><!--[--><!--]--> Echarts <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/webpack/01" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/typescript/01" class="" aria-label="Typescript"><!--[--><!--]--> Typescript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/vue2/01 " class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/vue3/01" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/react/01" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其它</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/git/01" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/uniapp/01" class="" aria-label="Uniapp"><!--[--><!--]--> Uniapp <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="python"><!--[--><!--]--> python <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="C++"><!--[--><!--]--> C++ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="C#"><!--[--><!--]--> C# <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Typescript挑战"><span class="title">Typescript挑战</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Typescript挑战"><span class="title">Typescript挑战</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="简单"><!--[--><!--]--> 简单 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="中等"><!--[--><!--]--> 中等 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="困难"><!--[--><!--]--> 困难 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="服务端"><span class="title">服务端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="服务端"><span class="title">服务端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/nodejs/01" class="" aria-label="nodejs"><!--[--><!--]--> nodejs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/linux/01" class="" aria-label="linux"><!--[--><!--]--> linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/mysql/01" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/mongodb/01" class="" aria-label="mongodb"><!--[--><!--]--> mongodb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/index" class="" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/W-HanYu/Ustinian-Hanyu" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索文档" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/index" class="" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/html+css/01" class="" aria-label="Html/Css"><!--[--><!--]--> Html/Css <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/js/01" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Css进阶</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/less/01" class="" aria-label="Less"><!--[--><!--]--> Less <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/sass/01" class="" aria-label="Sass"><!--[--><!--]--> Sass <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/tailwindcss/01" class="" aria-label="tailwindcss"><!--[--><!--]--> tailwindcss <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JS进阶</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/es6/01" class="" aria-label=" ES6"><!--[--><!--]-->  ES6 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/ajax/01" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/echarts/01" class="" aria-label="Echarts"><!--[--><!--]--> Echarts <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/webpack/01" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/typescript/01" class="" aria-label="Typescript"><!--[--><!--]--> Typescript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/vue2/01 " class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/vue3/01" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/react/01" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其它</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/notes/git/01" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/notes/uniapp/01" class="" aria-label="Uniapp"><!--[--><!--]--> Uniapp <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="python"><!--[--><!--]--> python <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="C++"><!--[--><!--]--> C++ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="C#"><!--[--><!--]--> C# <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Typescript挑战"><span class="title">Typescript挑战</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Typescript挑战"><span class="title">Typescript挑战</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="简单"><!--[--><!--]--> 简单 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="中等"><!--[--><!--]--> 中等 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/index" class="" aria-label="困难"><!--[--><!--]--> 困难 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="服务端"><span class="title">服务端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="服务端"><span class="title">服务端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/nodejs/01" class="" aria-label="nodejs"><!--[--><!--]--> nodejs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/linux/01" class="" aria-label="linux"><!--[--><!--]--> linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/mysql/01" class="" aria-label="mysql"><!--[--><!--]--> mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/mongodb/01" class="" aria-label="mongodb"><!--[--><!--]--> mongodb <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/index" class="" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/W-HanYu/Ustinian-Hanyu" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">nodejs学习笔记 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/nodejs/01.html" class="sidebar-item" aria-label="01 【nodejs简介】"><!--[--><!--]--> 01 【nodejs简介】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/02.html" class="sidebar-item" aria-label="02 【nodejs开发环境安装】"><!--[--><!--]--> 02 【nodejs开发环境安装】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/03.html" class="sidebar-item" aria-label="03 【npm的使用】"><!--[--><!--]--> 03 【npm的使用】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/04.html" class="sidebar-item" aria-label="04 【nodejs模块化规范：CommonJS】"><!--[--><!--]--> 04 【nodejs模块化规范：CommonJS】 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="05 【nodejs内置模块（上）】"><!--[--><!--]--> 05 【nodejs内置模块（上）】 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_1-nodejs-的官方api文档" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.nodejs 的官方API文档"><!--[--><!--]--> 1.nodejs 的官方API文档 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_2-nodejs-中模块的分类" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.nodejs 中模块的分类"><!--[--><!--]--> 2.nodejs 中模块的分类 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_2-1-内置模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 内置模块"><!--[--><!--]--> 2.1 内置模块 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_2-2-require-加载第三方包的机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 require 加载第三方包的机制"><!--[--><!--]--> 2.2 require 加载第三方包的机制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_2-3-自定义模块-module" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 自定义模块（module）"><!--[--><!--]--> 2.3 自定义模块（module） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_3-网络服务-http" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.网络服务 http"><!--[--><!--]--> 3.网络服务 http <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_3-1-http模块概览" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 http模块概览"><!--[--><!--]--> 3.1 http模块概览 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_3-2-一个简单的例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 一个简单的例子"><!--[--><!--]--> 3.2 一个简单的例子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_3-3-例子解释" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 例子解释"><!--[--><!--]--> 3.3 例子解释 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_3-4-关于http-incomingmessage、http-serverresponse" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 关于http.IncomingMessage、http.ServerResponse"><!--[--><!--]--> 3.4 关于http.IncomingMessage、http.ServerResponse <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-网络服务-http-res" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.网络服务 http res"><!--[--><!--]--> 4.网络服务 http res <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_4-1-概览" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1 概览"><!--[--><!--]--> 4.1 概览 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-2-例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2 例子"><!--[--><!--]--> 4.2 例子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-3-设置状态代码、状态描述信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3 设置状态代码、状态描述信息"><!--[--><!--]--> 4.3 设置状态代码、状态描述信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-4-设置响应头部" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4 设置响应头部"><!--[--><!--]--> 4.4 设置响应头部 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-5-其他响应头部操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5 其他响应头部操作"><!--[--><!--]--> 4.5 其他响应头部操作 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-6-设置响应主体" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.6 设置响应主体"><!--[--><!--]--> 4.6 设置响应主体 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-7-超时处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7 超时处理"><!--[--><!--]--> 4.7 超时处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-8-事件-close-finish" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.8 事件 close/finish"><!--[--><!--]--> 4.8 事件 close/finish <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_4-9-其他不常用属性-方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.9 其他不常用属性/方法"><!--[--><!--]--> 4.9 其他不常用属性/方法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_5-网络服务-http-req" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.网络服务 http req"><!--[--><!--]--> 5.网络服务 http req <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_5-1-概览" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1 概览"><!--[--><!--]--> 5.1 概览 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_5-2-属性-方法-事件-分类" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2 属性/方法/事件 分类"><!--[--><!--]--> 5.2 属性/方法/事件 分类 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_5-3-服务端的例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.3 服务端的例子"><!--[--><!--]--> 5.3 服务端的例子 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_6-网络服务-https" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.网络服务 https"><!--[--><!--]--> 6.网络服务 https <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_6-1-模块概览" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1 模块概览"><!--[--><!--]--> 6.1 模块概览 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_6-2-客户端例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2 客户端例子"><!--[--><!--]--> 6.2 客户端例子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_6-3-服务端例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3 服务端例子"><!--[--><!--]--> 6.3 服务端例子 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_7-url-接口-代替内置模块url使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.URL 接口(代替内置模块url使用)"><!--[--><!--]--> 7.URL 接口(代替内置模块url使用) <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_7-1-对比url模块和url类" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1 对比url模块和URL类"><!--[--><!--]--> 7.1 对比url模块和URL类 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_7-2-构造函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2 构造函数"><!--[--><!--]--> 7.2 构造函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_7-3-实例属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3 实例属性"><!--[--><!--]--> 7.3 实例属性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_8-urlsearchparams-对象-代替内置模块querystring使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.URLSearchParams 对象(代替内置模块querystring使用)"><!--[--><!--]--> 8.URLSearchParams 对象(代替内置模块querystring使用) <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodejs/05.html#_8-1-概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.1 概述"><!--[--><!--]--> 8.1 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_8-2-urlsearchparams-tostring" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.2 URLSearchParams.toString()"><!--[--><!--]--> 8.2 URLSearchParams.toString() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_8-3-urlsearchparams-has" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.3 URLSearchParams.has()"><!--[--><!--]--> 8.3 URLSearchParams.has() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_8-4-urlsearchparams-get-urlsearchparams-getall" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.4 URLSearchParams.get()，URLSearchParams.getAll()"><!--[--><!--]--> 8.4 URLSearchParams.get()，URLSearchParams.getAll() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodejs/05.html#_8-5-urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.5 URLSearchParams.keys()，URLSearchParams.values()，URLSearchParams.entries()"><!--[--><!--]--> 8.5 URLSearchParams.keys()，URLSearchParams.values()，URLSearchParams.entries() <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodejs/05.html#_9-qs模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.qs模块"><!--[--><!--]--> 9.qs模块 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/notes/nodejs/06.html" class="sidebar-item" aria-label="06 【nodejs内置模块（中）】"><!--[--><!--]--> 06 【nodejs内置模块（中）】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/07.html" class="sidebar-item" aria-label="07 【nodejs内置模块（下）】"><!--[--><!--]--> 07 【nodejs内置模块（下）】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/08.html" class="sidebar-item" aria-label="08 【爬虫】"><!--[--><!--]--> 08 【爬虫】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/09.html" class="sidebar-item" aria-label="09 【原生nodejs路由、获取参数、静态目录】"><!--[--><!--]--> 09 【原生nodejs路由、获取参数、静态目录】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/10.html" class="sidebar-item" aria-label="10 【Express基本使用】"><!--[--><!--]--> 10 【Express基本使用】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/11.html" class="sidebar-item" aria-label="11 【Express服务端渲染】"><!--[--><!--]--> 11 【Express服务端渲染】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/12.html" class="sidebar-item" aria-label="12 【操作mongodb数据库】"><!--[--><!--]--> 12 【操作mongodb数据库】 <!--[--><!--]--></a><!----></li><li><a href="/notes/nodejs/13.html" class="sidebar-item" aria-label="13 【操作mysql数据库】"><!--[--><!--]--> 13 【操作mysql数据库】 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="_05-【nodejs内置模块-上-】" tabindex="-1"><a class="header-anchor" href="#_05-【nodejs内置模块-上-】" aria-hidden="true">#</a> 05 【nodejs内置模块（上）】</h1><h2 id="_1-nodejs-的官方api文档" tabindex="-1"><a class="header-anchor" href="#_1-nodejs-的官方api文档" aria-hidden="true">#</a> 1.nodejs 的官方API文档</h2><ul><li>Node.js 的API文档（英文）： https://nodejs.org/docs/latest-v8.x/api/index.html</li><li>Node.js 的API文档（中文）：http://nodejs.cn/api/</li></ul><p>关于 Node.js 的内置模块和常见API，可以看官方文档。</p><p>查阅文档时，稳定指数如下：</p><ul><li>红色：废弃。</li><li>橙色：实验。表示当前版本可用，其他版本不确定。也许不向下兼容，建议不要在生产环境中使用该特性。</li><li>绿色：稳定。与 npm 生态系统的兼容性是最高的优先级。</li></ul><h2 id="_2-nodejs-中模块的分类" tabindex="-1"><a class="header-anchor" href="#_2-nodejs-中模块的分类" aria-hidden="true">#</a> 2.nodejs 中模块的分类</h2><p>Node.js 应用由模块组成，采用 CommonJS 模块规范。Node.js中的模块分为三种：</p><ul><li>内置模块</li><li>第三方模块</li><li>自定义模块</li></ul><p>下面简单介绍一下。</p><h3 id="_2-1-内置模块" tabindex="-1"><a class="header-anchor" href="#_2-1-内置模块" aria-hidden="true">#</a> 2.1 内置模块</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;../&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>require方法用于加载模块。</p><p>常见的内置模块包括：</p><ul><li>FS：文件系统模块</li><li>path：路径模块</li><li>OS：操作系统相关</li><li>net：网络相关</li><li>http</li><li>...</li></ul><p>你可能会有疑问：Node.js 这么牛吗？还能直接和操作系统做交互？</p><p>带着这个疑问，我们不妨简单看看 Node.js 的源码，以 os 模块举例：</p><ul><li>打开os模块的源码：https://github.com/nodejs/node/blob/master/lib/os.js，翻到最底部，找到 <code>cpus</code>这个方法</li><li>进而找到 <code>getCPUs()</code></li><li>internalBinding(&#39;os&#39;)：通过 internalBinding 可以调用系统底层的方法。internalBinding 主要是 JS 虚拟机在做的事情。</li><li><code>internalBinding(&#39;os&#39;)</code> 的实现，在 https://github.com/nodejs/node/blob/master/src/node_os.cc 里，里面都是 C++ 的代码。比如有一个<code>getCPUs</code>方法。</li></ul><p>现在你知道了，JS本身是没有能力获取底层系统资源的，这一切都是 JS虚拟机在和底层做交互，然后通过 JS 的表现形式，暴露给应用层。</p><p>另外，还有很多库，是直接使用C/++编写的，通过编译之后，再提供给 JS 应用层调用，或者直接提供给 Node.js层使用。</p><p><strong>所有的编程语言底层都会回归C/C++</strong>，甚至是汇编语言。</p><h3 id="_2-2-require-加载第三方包的机制" tabindex="-1"><a class="header-anchor" href="#_2-2-require-加载第三方包的机制" aria-hidden="true">#</a> 2.2 require 加载第三方包的机制</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>require 加载第三方包的机制：</p><p>（1）第三方包安装好后，这个包一般会存放在当前项目的 node_modules 文件夹中。我们找到这个包的 package.json 文件，并且找到里面的main属性对应的入口模块，这个入口模块就是这个包的入口文件。</p><p>（2）如果第三方包中没有找到package.json文件，或者package.json文件中没有main属性，则默认加载第三方包中的index.js文件。</p><p>（3）如果在 node_modules 文件夹中没有找到这个包，或者以上所有情况都没有找到，则会向上一级父级目录下查找node_modules文件夹，查找规则如上一致。</p><p>（4）如果一直找到该模块的磁盘根路径都没有找到，则会报错：can not find module xxx。</p><h3 id="_2-3-自定义模块-module" tabindex="-1"><a class="header-anchor" href="#_2-3-自定义模块-module" aria-hidden="true">#</a> 2.3 自定义模块（module）</h3><p>每个文件就是一个模块，有自己的作用域。在一个文件里面定义的变量、函数、类，都是私有的，对其他文件不可见。</p><p>举例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> example <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./example.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span><span class="token function">addX</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-网络服务-http" tabindex="-1"><a class="header-anchor" href="#_3-网络服务-http" aria-hidden="true">#</a> 3.网络服务 http</h2><h3 id="_3-1-http模块概览" tabindex="-1"><a class="header-anchor" href="#_3-1-http模块概览" aria-hidden="true">#</a> 3.1 http模块概览</h3><p>大多数nodejs开发者都是冲着开发web server的目的选择了nodejs。正如官网所展示的，借助http模块，可以几行代码就搞定一个超迷你的web server。</p><p>在nodejs中，<code>http</code>可以说是最核心的模块，同时也是比较复杂的一个模块。上手很简单，但一旦深入学习，不少初学者就会觉得头疼，不知从何入手。</p><p>本文先从一个简单的例子出发，引出<code>http</code>模块最核心的四个实例。看完本文，应该就能够对http模块有个整体的认识。</p><h3 id="_3-2-一个简单的例子" tabindex="-1"><a class="header-anchor" href="#_3-2-一个简单的例子" aria-hidden="true">#</a> 3.2 一个简单的例子</h3><p>在下面的例子中，我们创建了1个web服务器、1个http客户端</p><ul><li>服务器server：接收来自客户端的请求，并将客户端请求的地址返回给客户端。</li><li>客户端client：向服务器发起请求，并将服务器返回的内容打印到控制台。</li></ul><p>代码如下所示，只有几行，但包含了不少信息量。下一小节会进行简单介绍。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http server 例子</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">serverReq<span class="token punctuation">,</span> serverRes</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> url <span class="token operator">=</span> serverReq<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    serverRes<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span> <span class="token string">&#39;您访问的地址是：&#39;</span> <span class="token operator">+</span> url <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http client 例子</span>
<span class="token keyword">var</span> client <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://127.0.0.1:3000&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">clientRes</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    clientRes<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-例子解释" tabindex="-1"><a class="header-anchor" href="#_3-3-例子解释" aria-hidden="true">#</a> 3.3 例子解释</h3><p>在上面这个简单的例子里，涉及了4个实例。大部分时候，serverReq、serverRes 才是主角。</p><ul><li>server：http.Server实例，用来提供服务，处理客户端的请求。</li><li>client：http.ClientReques实例，用来向服务端发起请求。</li><li>serverReq/clientRes：其实都是 http.IncomingMessage实例。serverReq 用来获取客户端请求的相关信息，如request header；而clientRes用来获取服务端返回的相关信息，比如response header。</li><li>serverRes：http.ServerResponse实例</li></ul><h3 id="_3-4-关于http-incomingmessage、http-serverresponse" tabindex="-1"><a class="header-anchor" href="#_3-4-关于http-incomingmessage、http-serverresponse" aria-hidden="true">#</a> 3.4 关于http.IncomingMessage、http.ServerResponse</h3><p>先讲下 http.ServerResponse 实例。作用很明确，服务端通过http.ServerResponse 实例，来个请求方发送数据。包括发送响应表头，发送响应主体等。</p><p>接下来是 http.IncomingMessage 实例，由于在 server、client 都出现了，初学者难免有点迷茫。它的作用是</p><p>在server端：获取请求发送方的信息，比如请求方法、路径、传递的数据等。 在client端：获取 server 端发送过来的信息，比如请求方法、路径、传递的数据等。</p><p>http.IncomingMessage实例 有三个属性需要注意：method、statusCode、statusMessage。</p><ul><li>method：只在 server 端的实例有（也就是 serverReq.method）</li><li>statusCode/statusMessage：只在 client 端 的实例有（也就是 clientRes.method）</li></ul><h2 id="_4-网络服务-http-res" tabindex="-1"><a class="header-anchor" href="#_4-网络服务-http-res" aria-hidden="true">#</a> 4.网络服务 http res</h2><h3 id="_4-1-概览" tabindex="-1"><a class="header-anchor" href="#_4-1-概览" aria-hidden="true">#</a> 4.1 概览</h3><p>http模块四剑客之一的<code>res</code>，应该都不陌生了。一个web服务程序，接受到来自客户端的http请求后，向客户端返回正确的响应内容，这就是<code>res</code>的职责。</p><p>返回的内容包括：状态代码/状态描述信息、响应头部、响应主体。下文会举几个简单的例子。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-例子" tabindex="-1"><a class="header-anchor" href="#_4-2-例子" aria-hidden="true">#</a> 4.2 例子</h3><p>在下面的例子中，我们同时设置了 状态代码/状态描述信息、响应头部、响应主体，就是这么简单。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置状态码、状态描述信息、响应主体</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-设置状态代码、状态描述信息" tabindex="-1"><a class="header-anchor" href="#_4-3-设置状态代码、状态描述信息" aria-hidden="true">#</a> 4.3 设置状态代码、状态描述信息</h3><p><code>res</code>提供了 res.writeHead()、res.statusCode/res.statusMessage 来实现这个目的。</p><p>举例，如果想要设置 200/ok ，可以</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>也可以</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>两者差不多，差异点在于</p><ol><li>res.writeHead() 可以提供额外的功能，比如设置响应头部。</li><li>当响应头部发送出去后，res.statusCode/res.statusMessage 会被设置成已发送出去的 状态代码/状态描述信息。</li></ol><h3 id="_4-4-设置响应头部" tabindex="-1"><a class="header-anchor" href="#_4-4-设置响应头部" aria-hidden="true">#</a> 4.4 设置响应头部</h3><p><code>res</code>提供了 res.writeHead()、response.setHeader() 来实现响应头部的设置。</p><p>举例，比如想把 <code>Content-Type</code> 设置为 <code>text-plain</code>，那么可以</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 方法一</span>
res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text-plain&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方法二</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text-plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>两者的差异点在哪里呢？</p><ol><li>res.writeHead() 不单单是设置header。</li><li>已经通过 res.setHeader() 设置了header，当通过 res.writeHead() 设置同名header，res.writeHead() 的设置会覆盖之前的设置。</li></ol><p>关于第2点差异，这里举个例子。下面代码，最终的 <code>Content-Type</code> 为 <code>text/plain</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>而下面的例子，则直接报错。报错信息为 <code>Error: Can&#39;t set headers after they are sent.</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-其他响应头部操作" tabindex="-1"><a class="header-anchor" href="#_4-5-其他响应头部操作" aria-hidden="true">#</a> 4.5 其他响应头部操作</h3><p>增、删、改、查 是配套的。下面分别举例说明下，例子太简单就直接上代码了。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 增</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 删</span>
res<span class="token punctuation">.</span><span class="token function">removeHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 改</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 覆盖</span>

<span class="token comment">// 查</span>
res<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中略显不同的是 res.getHeader(name)，name 用的是小写，返回值没做特殊处理。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TEXT/HTML&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> res<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// TEXT/HTML</span>

res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> res<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// text/plain</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此外，还有不那么常用的：</p><ul><li>res.headersSent：header是否已经发送；</li><li>res.sendDate：默认为true。但为true时，会在response header里自动设置Date首部。</li></ul><h3 id="_4-6-设置响应主体" tabindex="-1"><a class="header-anchor" href="#_4-6-设置响应主体" aria-hidden="true">#</a> 4.6 设置响应主体</h3><p>主要用到 res.write() 以及 res.end() 两个方法。</p><p>res.write() API的信息量略大，建议看下<a href="https://nodejs.org/api/http.html#http_response_write_chunk_encoding_callback" target="_blank" rel="noopener noreferrer">官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h4 id="_4-6-1-response-write-chunk-encoding-callback" tabindex="-1"><a class="header-anchor" href="#_4-6-1-response-write-chunk-encoding-callback" aria-hidden="true">#</a> 4.6.1 response.write(chunk[, encoding][, callback])</h4><ul><li>chunk：响应主体的内容，可以是string，也可以是buffer。当为string时，encoding参数用来指明编码方式。（默认是utf8）</li><li>encoding：编码方式，默认是 utf8。</li><li>callback：当响应体flushed时触发。（TODO 这里想下更好的解释。。。）</li></ul><p>使用上没什么难度，只是有些注意事项：</p><ol><li>如果 res.write() 被调用时， res.writeHead() 还没被调用过，那么，就会把header flush出去。</li><li>res.write() 可以被调用多次。</li><li>当 res.write(chunk) 第一次被调用时，node 会将 header 信息 以及 chunk 发送到客户端。第二次调用 res.write(chunk) ，node 会认为你是要streaming data（WTF，该怎么翻译）。。。</li></ol><blockquote><p>Returns true if the entire data was flushed successfully to the kernel buffer. Returns false if all or part of the data was queued in user memory. &#39;drain&#39; will be emitted when the buffer is free again.</p></blockquote><h4 id="_4-6-2-response-end-data-encoding-callback" tabindex="-1"><a class="header-anchor" href="#_4-6-2-response-end-data-encoding-callback" aria-hidden="true">#</a> 4.6.2 response.end([data][, encoding][, callback])</h4><p>掌握了 res.write() 的话，res.end() 就很简单了。res.end() 的用处是告诉nodejs，header、body都给你了，这次响应就到这里吧。</p><p>有点像个语法糖，可以看成下面两个调用的组合。至于callback，当响应传递结束后触发。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-超时处理" tabindex="-1"><a class="header-anchor" href="#_4-7-超时处理" aria-hidden="true">#</a> 4.7 超时处理</h3><p>接口：response.setTimeout(msecs, callback)</p><p>关于 timeout 事件的说明，同样是言简意赅（WTF），话少信息量大，最好来个demo TODO</p><blockquote><p>If no &#39;timeout&#39; listener is added to the request, the response, or the server, then sockets are destroyed when they time out. If you assign a handler on the request, the response, or the server&#39;s &#39;timeout&#39; events, then it is your responsibility to handle timed out sockets.</p></blockquote><h3 id="_4-8-事件-close-finish" tabindex="-1"><a class="header-anchor" href="#_4-8-事件-close-finish" aria-hidden="true">#</a> 4.8 事件 close/finish</h3><ul><li>close：response.end() 被调用前，连接就断开了。此时会触发这个事件。</li><li>finish：响应header、body都已经发送出去（交给操作系统，排队等候传输），但客户端是否实际收到数据为止。（这个事件后，res 上就不会再有其他事件触发）</li></ul><h3 id="_4-9-其他不常用属性-方法" tabindex="-1"><a class="header-anchor" href="#_4-9-其他不常用属性-方法" aria-hidden="true">#</a> 4.9 其他不常用属性/方法</h3><ul><li>response.finished：一开始是false，响应结束后，设置为true。</li><li>response.sendDate：默认是true。是否自动设置Date头部。（按HTTP协议是必须要的，除非是调试用，不然不要设置为false）</li><li>response.headersSent：只读属性。响应头部是否已发送。</li><li>response.writeContinue()：发送 HTTP/1.1 100 Continue 消息给客户端，提示说服务端愿意接受客户端的请求，请继续发送请求正文（body)。（TODO 做个demo啥的是大大的好）</li></ul><h2 id="_5-网络服务-http-req" tabindex="-1"><a class="header-anchor" href="#_5-网络服务-http-req" aria-hidden="true">#</a> 5.网络服务 http req</h2><h3 id="_5-1-概览" tabindex="-1"><a class="header-anchor" href="#_5-1-概览" aria-hidden="true">#</a> 5.1 概览</h3><p>本文的重点会放在<code>req</code>这个对象上。前面已经提到，它其实是http.IncomingMessage实例，在服务端、客户端作用略微有差异</p><ul><li>服务端处：获取请求方的相关信息，如request header等。</li><li>客户端处：获取响应方返回的相关信息，如statusCode等。</li></ul><p>服务端例子：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 下面的 req</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>客户端例子</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 下面的res</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://127.0.0.1:3000&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-属性-方法-事件-分类" tabindex="-1"><a class="header-anchor" href="#_5-2-属性-方法-事件-分类" aria-hidden="true">#</a> 5.2 属性/方法/事件 分类</h3><p>http.IncomingMessage的属性/方法/事件 不是特别多，按照是否客户端/服务端 特有的，下面进行简单归类。可以看到</p><ul><li>服务端处特有：url</li><li>客户端处特有：statusCode、statusMessage</li></ul><table><thead><tr><th style="text-align:left;">类型</th><th style="text-align:center;">名称</th><th style="text-align:center;">服务端</th><th style="text-align:center;">客户端</th></tr></thead><tbody><tr><td style="text-align:left;">事件</td><td style="text-align:center;">aborted</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">事件</td><td style="text-align:center;">close</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">headers</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">rawHeaders</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">statusCode</td><td style="text-align:center;">✕</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">statusMessage</td><td style="text-align:center;">✕</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">httpVersion</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">url</td><td style="text-align:center;">✓</td><td style="text-align:center;">✕</td></tr><tr><td style="text-align:left;">属性</td><td style="text-align:center;">socket</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">方法</td><td style="text-align:center;">.destroy()</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td style="text-align:left;">方法</td><td style="text-align:center;">.setTimeout()</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr></tbody></table><h3 id="_5-3-服务端的例子" tabindex="-1"><a class="header-anchor" href="#_5-3-服务端的例子" aria-hidden="true">#</a> 5.3 服务端的例子</h3><h4 id="_5-3-1-例子一-获取httpversion-method-url" tabindex="-1"><a class="header-anchor" href="#_5-3-1-例子一-获取httpversion-method-url" aria-hidden="true">#</a> 5.3.1 例子一：获取httpVersion/method/url</h4><p>下面是一个典型的HTTP请求报文，里面最重要的内容包括：HTTP版本、请求方法、请求地址、请求头部。</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">/hello</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">127.0.0.1:3000</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive</span></span>
<span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-cache</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么，如何获取上面提到的信息呢？很简单，直接上代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// getClientInfo.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&#39;1、客户端请求url：&#39;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>url <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&#39;2、http版本：&#39;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>httpVersion <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&#39;3、http请求方法：&#39;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>method <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&#39;4、http请求头部&#39;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>、客户端请求url：/hello
<span class="token number">2</span>、http版本：1.1
<span class="token number">3</span>、http请求方法：GET
<span class="token number">4</span>、http headers：<span class="token punctuation">{</span><span class="token string">&quot;host&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1:3000&quot;</span>,<span class="token string">&quot;connection&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;keep-alive&quot;</span>,<span class="token string">&quot;cache-control&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;no-cache&quot;</span>,&quot;user-age
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-3-2-例子二-获取get请求参数" tabindex="-1"><a class="header-anchor" href="#_5-3-2-例子二-获取get请求参数" aria-hidden="true">#</a> 5.3.2 例子二：获取get请求参数</h4><p>服务端代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// getClientGetQuery.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;querystring&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> urlObj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> query <span class="token operator">=</span> urlObj<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token keyword">var</span> queryObj <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>queryObj<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问地址 http://127.0.0.1:3000/hello?nick=chyingp&amp;hello=world</p><p>服务端输出如下</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">{</span><span class="token string">&quot;nick&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;chyingp&quot;</span>,<span class="token string">&quot;hello&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-3-3-例子三-获取post请求参数" tabindex="-1"><a class="header-anchor" href="#_5-3-3-例子三-获取post请求参数" aria-hidden="true">#</a> 5.3.3 例子三：获取post请求参数</h4><p>服务端代码如下</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// getClientPostBody.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;querystring&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
    <span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>  
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">thunk</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        body <span class="token operator">+=</span> thunk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&#39;post body is: &#39;</span> <span class="token operator">+</span> body <span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过curl构造post请求：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-d</span> <span class="token string">&#39;nick=casper&amp;hello=world&#39;</span> http://127.0.0.1:3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>服务端打印如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>post body is: <span class="token assign-left variable">nick</span><span class="token operator">=</span>casper<span class="token operator">&amp;</span><span class="token assign-left variable">hello</span><span class="token operator">=</span>world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>备注：post请求中，不同的<code>Content-type</code>，post body有不小差异，感兴趣的同学可以研究下。</p><p>本例中的post请求，HTTP报文大概如下</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code><span class="token request-line"><span class="token method property">POST</span> <span class="token request-target url">/</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">127.0.0.1:3000</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/x-www-form-urlencoded</span></span>
<span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-cache</span></span>

nick=casper&amp;hello=world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-网络服务-https" tabindex="-1"><a class="header-anchor" href="#_6-网络服务-https" aria-hidden="true">#</a> 6.网络服务 https</h2><h3 id="_6-1-模块概览" tabindex="-1"><a class="header-anchor" href="#_6-1-模块概览" aria-hidden="true">#</a> 6.1 模块概览</h3><p>这个模块的重要性，基本不用强调了。在网络安全问题日益严峻的今天，网站采用HTTPS是个必然的趋势。</p><p>在nodejs中，提供了 https 这个模块来完成 HTTPS 相关功能。从官方文档来看，跟 http 模块用法非常相似。</p><p>本文主要包含两部分：</p><ol><li>通过客户端、服务端的例子，对https模块进行入门讲解。</li><li>如何访问安全证书不受信任的网站。（以 12306 为例子）</li></ol><p>篇幅所限，本文无法对 HTTPS协议 及 相关技术体系 做过多讲解，有问题欢迎留言交流。</p><h3 id="_6-2-客户端例子" tabindex="-1"><a class="header-anchor" href="#_6-2-客户端例子" aria-hidden="true">#</a> 6.2 客户端例子</h3><p>跟http模块的用法非常像，只不过请求的地址是https协议的而已，代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;https&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://www.baidu.com&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;status code: &#39;</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;headers: &#39;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-服务端例子" tabindex="-1"><a class="header-anchor" href="#_6-3-服务端例子" aria-hidden="true">#</a> 6.3 服务端例子</h3><p>对外提供HTTPS服务，需要有HTTPS证书。如果你已经有了HTTPS证书，那么可以跳过证书生成的环节。如果没有，可以参考如下步骤</p><h4 id="_6-3-1-生成证书" tabindex="-1"><a class="header-anchor" href="#_6-3-1-生成证书" aria-hidden="true">#</a> 6.3.1 生成证书</h4><p><strong>1.创建个目录存放证书。</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> cert
<span class="token builtin class-name">cd</span> cert
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.生成私钥。</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>openssl genrsa -out chyingp-key.pem 2048
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3.生成证书签名请求（csr是 Certificate Signing Request的意思）。</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>openssl req -new \
  -sha256
  -key chyingp-key.key.pem \
  -out chyingp-csr.pem \
  -subj &quot;/C=CN/ST=Guandong/L=Shenzhen/O=YH Inc/CN=www.chyingp.com&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4.生成证书。</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>openssl x509 \
  -req -in chyingp-csr.pem \
  -signkey chyingp-key.pem \
  -out chyingp-cert.pem
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-3-2-https服务端" tabindex="-1"><a class="header-anchor" href="#_6-3-2-https服务端" aria-hidden="true">#</a> 6.3.2 HTTPS服务端</h4><p>代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;https&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./cert/chyingp-key.pem&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 私钥</span>
    <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./cert/chyingp-cert.pem&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 证书</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;这是来自HTTPS服务器的返回&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由于我并没有 www.chyingp.com 这个域名，于是先配置本地host</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>127.0.0.1 www.chyingp.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动服务，并在浏览器里访问 <a href="http://www.chyingp.com:3000/" target="_blank" rel="noopener noreferrer">http://www.chyingp.com:3000<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。注意，浏览器会提示你证书不可靠，点击 信任并继续访问 就行了。</p><h2 id="_7-url-接口-代替内置模块url使用" tabindex="-1"><a class="header-anchor" href="#_7-url-接口-代替内置模块url使用" aria-hidden="true">#</a> 7.URL 接口(代替内置模块url使用)</h2><blockquote><p>nodejs内置模块<code>url</code>有些方法要被废弃，我们使用<code>URL类</code>代替</p></blockquote><p>浏览器原生提供<code>URL()</code>接口，它是一个构造函数，用来构造、解析和编码 URL。一般情况下，通过<code>window.URL</code>可以拿到这个构造函数。</p><h3 id="_7-1-对比url模块和url类" tabindex="-1"><a class="header-anchor" href="#_7-1-对比url模块和url类" aria-hidden="true">#</a> 7.1 对比<code>url模块</code>和URL类</h3><table><thead><tr><th>属性</th><th>url模块</th><th>URL类</th></tr></thead><tbody><tr><td>protocol</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>host</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>port</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>hostname</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>search</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>query</td><td><code>✅</code></td><td><code>-</code></td></tr><tr><td>path</td><td><code>✅</code></td><td><code>-</code></td></tr><tr><td>pathname</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>href</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>hash</td><td><code>✅</code></td><td><code>✅</code></td></tr><tr><td>origin</td><td>-</td><td><code>✅</code></td></tr></tbody></table><p>可以看出来，只有三个字段不同，分别是<code>query</code>,<code>path</code>,<code>origin</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>打印两个对象的输出

<span class="token comment">// url模块，url.parse(&#39;link&#39;)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;https:&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">slashes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">auth</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;m.shop.com&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;m.shop.com&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">&#39;#detail&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&#39;?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token string">&#39;id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/home/share&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/home/share?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;https://m.shop.com/home/share?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099#detail&#39;</span>
<span class="token punctuation">}</span>
<span class="token comment">// new URL()</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;https://m.shop.com/home/share?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099#detail&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">origin</span><span class="token operator">:</span> <span class="token string">&#39;https://m.shop.com&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;https:&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;m.shop.com&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;m.shop.com&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/home/share&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&#39;?id=4433&amp;name=%E6%9D%8E%E5%A4%87&amp;directCompanyId=&amp;mobile=18951431099&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">searchParams</span><span class="token operator">:</span> URLSearchParams <span class="token punctuation">{</span>
    <span class="token string">&#39;id&#39;</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;4433&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;李备&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;directCompanyId&#39;</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;mobile&#39;</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;18951431099&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">&#39;#detail&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-构造函数" tabindex="-1"><a class="header-anchor" href="#_7-2-构造函数" aria-hidden="true">#</a> 7.2 构造函数</h3><p><code>URL()</code>作为构造函数，可以生成 URL 实例。它接受一个表示 URL 的字符串作为参数。如果参数不是合法的 URL，会报错。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.example.com/index.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://www.example.com/index.html&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面示例生成了一个 URL 实例，用来代表指定的网址。</p><p>除了字符串，<code>URL()</code>的参数也可以是另一个 URL 实例。这时，<code>URL()</code>会自动读取该实例的<code>href</code>属性，作为实际参数。</p><p>如果 URL 字符串是一个相对路径，那么需要表示绝对路径的第二个参数，作为计算基准。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> url1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url1<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://example.com/index.html&quot;</span>

<span class="token keyword">var</span> url2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;page2.html&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com/page1.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url2<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://example.com/page2.html&quot;</span>

<span class="token keyword">var</span> url3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;..&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com/a/b.html&#39;</span><span class="token punctuation">)</span>
url3<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://example.com/&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，返回的 URL 实例的路径都是在第二个参数的基础上，切换到第一个参数得到的。最后一个例子里面，第一个参数是<code>..</code>，表示上层路径。</p><h3 id="_7-3-实例属性" tabindex="-1"><a class="header-anchor" href="#_7-3-实例属性" aria-hidden="true">#</a> 7.3 实例属性</h3><p>URL 实例的属性与<code>Location</code>对象的属性基本一致，返回当前 URL 的信息。</p><ul><li>URL.href：返回整个 URL</li><li>URL.protocol：返回协议，以冒号<code>:</code>结尾</li><li>URL.hostname：返回域名</li><li>URL.host：返回域名与端口，包含<code>:</code>号，默认的80和443端口会省略</li><li>URL.port：返回端口</li><li>URL.origin：返回协议、域名和端口</li><li>URL.pathname：返回路径，以斜杠<code>/</code>开头</li><li>URL.search：返回查询字符串，以问号<code>?</code>开头</li><li>URL.searchParams：返回一个<code>URLSearchParams</code>实例，该属性是<code>Location</code>对象没有的</li><li>URL.hash：返回片段识别符，以井号<code>#</code>开头</li><li>URL.password：返回域名前面的密码</li><li>URL.username：返回域名前面的用户名</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;http://user:passwd@www.example.com:4097/path/a.html?x=111#part1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

url<span class="token punctuation">.</span>href
<span class="token comment">// &quot;http://user:passwd@www.example.com:4097/path/a.html?x=111#part1&quot;</span>
url<span class="token punctuation">.</span>protocol
<span class="token comment">// &quot;http:&quot;</span>
url<span class="token punctuation">.</span>hostname
<span class="token comment">// &quot;www.example.com&quot;</span>
url<span class="token punctuation">.</span>host
<span class="token comment">// &quot;www.example.com:4097&quot;</span>
url<span class="token punctuation">.</span>port
<span class="token comment">// &quot;4097&quot;</span>
url<span class="token punctuation">.</span>origin
<span class="token comment">// &quot;http://www.example.com:4097&quot;</span>
url<span class="token punctuation">.</span>pathname
<span class="token comment">// &quot;/path/a.html&quot;</span>
url<span class="token punctuation">.</span>search
<span class="token comment">// &quot;?x=111&quot;</span>
url<span class="token punctuation">.</span>searchParams
<span class="token comment">// URLSearchParams {}</span>
url<span class="token punctuation">.</span>hash
<span class="token comment">// &quot;#part1&quot;</span>
url<span class="token punctuation">.</span>password
<span class="token comment">// &quot;passwd&quot;</span>
url<span class="token punctuation">.</span>username
<span class="token comment">// &quot;user&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些属性里面，只有<code>origin</code>属性是只读的，其他属性都可写，并且会立即生效。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;http://example.com/index.html#part1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

url<span class="token punctuation">.</span>pathname <span class="token operator">=</span> <span class="token string">&#39;index2.html&#39;</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>href <span class="token comment">// &quot;http://example.com/index2.html#part1&quot;</span>

url<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token string">&#39;#part2&#39;</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>href <span class="token comment">// &quot;http://example.com/index2.html#part2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，改变 URL 实例的<code>pathname</code>属性和<code>hash</code>属性，都会实时反映在 URL 实例当中。</p><h2 id="_8-urlsearchparams-对象-代替内置模块querystring使用" tabindex="-1"><a class="header-anchor" href="#_8-urlsearchparams-对象-代替内置模块querystring使用" aria-hidden="true">#</a> 8.URLSearchParams 对象(代替内置模块querystring使用)</h2><blockquote><ol><li><p>nodejs内置模块<code>querystring</code>有些方法要被废弃，我们使用<code>URLSearchParams API </code>构造代替</p></li><li><p>如果你的nodejs版本大于18，可以使用<code>const querystring= require(&#39;node:querystring&#39;)</code> ``querystring<code>比</code>URLSearchParams<code>性能更高，但不是 标准化的 API。使用</code>URLSearchParams`当性能不重要或 当需要与浏览器代码兼容时。</p></li><li><p>还可以安装<code>qs</code>模块，使用方式和<code>querystring</code>一样</p></li></ol></blockquote><h3 id="_8-1-概述" tabindex="-1"><a class="header-anchor" href="#_8-1-概述" aria-hidden="true">#</a> 8.1 概述</h3><p><code>URLSearchParams</code>对象是浏览器的原生对象，用来构造、解析和处理 URL 的查询字符串（即 URL 问号后面的部分）。</p><p>它本身也是一个构造函数，可以生成实例。参数可以为查询字符串，起首的问号<code>?</code>有没有都行，也可以是对应查询字符串的数组或对象。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 方法一：传入字符串</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">&#39;?foo=1&amp;bar=2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方法二：传入数组</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方法三：传入对象</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&#39;foo&#39;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string-property property">&#39;bar&#39;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>URLSearchParams</code>会对查询字符串自动编码。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&#39;foo&#39;</span><span class="token operator">:</span> <span class="token string">&#39;你好&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;foo=%E4%BD%A0%E5%A5%BD&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，<code>foo</code>的值是汉字，<code>URLSearchParams</code>对其自动进行 URL 编码。</p><p>浏览器向服务器发送表单数据时，可以直接使用<code>URLSearchParams</code>实例作为表单数据。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://example.com/api&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> params
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，<code>fetch</code>命令向服务器发送命令时，可以直接使用<code>URLSearchParams</code>实例。</p><p><code>URLSearchParams</code>可以与<code>URL()</code>接口结合使用。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;somedefault&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，URL 实例的<code>searchParams</code>属性就是一个<code>URLSearchParams</code>实例，所以可以使用<code>URLSearchParams</code>接口的<code>get</code>方法。</p><p><code>URLSearchParams</code>实例有遍历器接口，可以用<code>for...of</code>循环遍历。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&#39;foo&#39;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string-property property">&#39;bar&#39;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&#39;: &#39;</span> <span class="token operator">+</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 1</span>
<span class="token comment">// bar: 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>URLSearchParams</code>没有实例属性，只有实例方法。</p><h3 id="_8-2-urlsearchparams-tostring" tabindex="-1"><a class="header-anchor" href="#_8-2-urlsearchparams-tostring" aria-hidden="true">#</a> 8.2 URLSearchParams.toString()</h3><p><code>toString</code>方法返回实例的字符串形式。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;https://example.com?foo=1&amp;bar=2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>

params<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;foo=1&amp;bar=2&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么需要字符串的场合，会自动调用<code>toString</code>方法。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token number">2.0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> <span class="token string">&#39;?&#39;</span> <span class="token operator">+</span> params<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，<code>location.href</code>赋值时，可以直接使用<code>params</code>对象。这时就会自动调用<code>toString</code>方法。</p><h3 id="_8-3-urlsearchparams-has" tabindex="-1"><a class="header-anchor" href="#_8-3-urlsearchparams-has" aria-hidden="true">#</a> 8.3 URLSearchParams.has()</h3><p><code>has()</code>方法返回一个布尔值，表示查询字符串是否包含指定的键名。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&#39;foo&#39;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string-property property">&#39;bar&#39;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
params<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;baz&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-4-urlsearchparams-get-urlsearchparams-getall" tabindex="-1"><a class="header-anchor" href="#_8-4-urlsearchparams-get-urlsearchparams-getall" aria-hidden="true">#</a> 8.4 URLSearchParams.get()，URLSearchParams.getAll()</h3><p><code>get()</code>方法用来读取查询字符串里面的指定键。它接受键名作为参数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">&#39;?foo=1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1&quot;</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>两个地方需要注意。第一，它返回的是字符串，如果原始值是数值，需要转一下类型；第二，如果指定的键名不存在，返回值是<code>null</code>。</p><p>如果有多个的同名键，<code>get</code>返回位置最前面的那个键值。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">&#39;?foo=3&amp;foo=2&amp;foo=1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;3&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，查询字符串有三个<code>foo</code>键，<code>get</code>方法返回最前面的键值<code>3</code>。</p><p><code>getAll()</code>方法返回一个数组，成员是指定键的所有键值。它接受键名作为参数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">&#39;?foo=1&amp;foo=2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;1&quot;, &quot;2&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，查询字符串有两个<code>foo</code>键，<code>getAll</code>返回的数组就有两个成员。</p><h3 id="_8-5-urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries" tabindex="-1"><a class="header-anchor" href="#_8-5-urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries" aria-hidden="true">#</a> 8.5 URLSearchParams.keys()，URLSearchParams.values()，URLSearchParams.entries()</h3><p>这三个方法都返回一个遍历器对象，供<code>for...of</code>循环遍历。它们的区别在于，<code>keys</code>方法返回的是键名的遍历器，<code>values</code>方法返回的是键值的遍历器，<code>entries</code>返回的是键值对的遍历器。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">&#39;a=1&amp;b=2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// [&quot;a&quot;, &quot;1&quot;]</span>
<span class="token comment">// [&quot;b&quot;, &quot;2&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果直接对<code>URLSearchParams</code>进行遍历，其实内部调用的就是<code>entries</code>接口。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">of</span> params<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-qs模块" tabindex="-1"><a class="header-anchor" href="#_9-qs模块" aria-hidden="true">#</a> 9.qs模块</h2><p>qs是一个npm仓库所管理的包,可通过npm install qs命令进行安装.</p><ol><li>qs.parse()将URL解析成对象的形式</li><li>qs.stringify()将对象 序列化成URL的形式，以&amp;进行拼接</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;qs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">1</span><span class="token punctuation">.</span>qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;username=&#39;admin&#39;&amp;password=&#39;123456&#39;&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Object { username: &quot;admin&quot;, password: &quot;123456&quot; }</span>

<span class="token number">2</span><span class="token punctuation">.</span>qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// username=admin&amp;password=123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 和<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>有什么区别<span class="token operator">?</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;hehe&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
qs<span class="token punctuation">.</span>stringify序列化结果如
name<span class="token operator">=</span>hehe<span class="token operator">&amp;</span>age<span class="token operator">=</span><span class="token number">10</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
而<span class="token constant">JSON</span><span class="token punctuation">.</span>stringify序列化结果如下：
<span class="token string">&quot;{&quot;</span>a<span class="token string">&quot;:&quot;</span>hehe<span class="token string">&quot;,&quot;</span>age<span class="token string">&quot;:10}&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/W-HanYu/Ustinian-Hanyu/edit/master/docs/notes/nodejs/05.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页"><!--[--><!--]--> 编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">最近更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者列表: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1453300745@qq.com">wanghanyu</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/notes/nodejs/04.html" class="" aria-label="04 【nodejs模块化规范：CommonJS】"><!--[--><!--]--> 04 【nodejs模块化规范：CommonJS】 <!--[--><!--]--></a></span><span class="next"><a href="/notes/nodejs/06.html" class="" aria-label="06 【nodejs内置模块（中）】"><!--[--><!--]--> 06 【nodejs内置模块（中）】 <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.713299e2.js" defer></script>
  </body>
</html>
