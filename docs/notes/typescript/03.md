# 3.TypeScriptå¸¸ç”¨ç±»å‹

## 3.1 æ¦‚è¿°

TypeScript æ˜¯ JS çš„è¶…é›†ï¼ŒTS æä¾›äº† JS çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”é¢å¤–çš„å¢åŠ äº†ï¼š**ç±»å‹ç³»ç»Ÿ**

- æ‰€æœ‰çš„ JS ä»£ç éƒ½æ˜¯ TS ä»£ç 
- **JS æœ‰ç±»å‹**ï¼ˆæ¯”å¦‚ï¼Œnumber/string ç­‰ï¼‰ï¼Œä½†æ˜¯ **JS ä¸ä¼šæ£€æŸ¥å˜é‡çš„ç±»å‹æ˜¯å¦å‘ç”Ÿå˜åŒ–**ï¼Œè€Œ TS ä¼šæ£€æŸ¥

TypeScript ç±»å‹ç³»ç»Ÿçš„ä¸»è¦ä¼˜åŠ¿ï¼š**å¯ä»¥æ˜¾ç¤ºæ ‡è®°å‡ºä»£ç ä¸­çš„æ„å¤–è¡Œä¸ºï¼Œä»è€Œé™ä½äº†å‘ç”Ÿé”™è¯¯çš„å¯èƒ½æ€§**

**ç¤ºä¾‹ä»£ç **:

```typescript
let age = 18

let age: number = 18
```

- è¯´æ˜ï¼šä»£ç ä¸­çš„ `: number` å°±æ˜¯**ç±»å‹æ³¨è§£**
- ä½œç”¨ï¼š**ä¸ºå˜é‡æ·»åŠ ç±»å‹çº¦æŸ**ã€‚æ¯”å¦‚ï¼Œä¸Šè¿°ä»£ç ä¸­ï¼Œçº¦å®šå˜é‡ age çš„ç±»å‹ä¸º number ç±»å‹
- è§£é‡Šï¼š**çº¦å®šäº†ä»€ä¹ˆç±»å‹ï¼Œå°±åªèƒ½ç»™å˜é‡èµ‹å€¼è¯¥ç±»å‹çš„å€¼ï¼Œå¦åˆ™ï¼Œå°±ä¼šæŠ¥é”™**
- çº¦å®šäº†ç±»å‹ä¹‹åï¼Œä»£ç çš„æç¤ºå°±ä¼šéå¸¸çš„æ¸…æ™°
- é”™è¯¯æ¼”ç¤ºï¼š

```typescript
// é”™è¯¯ä»£ç ï¼š
// é”™è¯¯åŸå› ï¼šå°† string ç±»å‹çš„å€¼èµ‹å€¼ç»™äº† number ç±»å‹çš„å˜é‡ï¼Œç±»å‹ä¸ä¸€è‡´
let age: number = '18'
```

## 3.2 TypeScriptå¸¸è§ç±»å‹

å¯ä»¥å°† TS ä¸­çš„å¸¸ç”¨åŸºç¡€ç±»å‹ç»†åˆ†ä¸ºä¸¤ç±»ï¼š

- JS å·²æœ‰ç±»å‹
  - åŸå§‹ç±»å‹ï¼Œç®€å•ç±»å‹ï¼ˆ`stringã€booleanã€numberã€objectã€bigintã€symbolã€null å’Œ undefined`ï¼‰
  - å¤æ‚æ•°æ®ç±»å‹ï¼ˆæ•°ç»„ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰
- TS æ–°å¢ç±»å‹
  - è”åˆç±»å‹
  - è‡ªå®šä¹‰ç±»å‹ï¼ˆç±»å‹åˆ«åï¼‰
  - æ¥å£
  - å…ƒç»„
  - å­—é¢é‡ç±»å‹
  - æšä¸¾
  - void
  - any
  - â€¦

## 3.3 åŸå§‹ç±»å‹

### 3.3.1 JSçš„å…«ç§å†…ç½®ç±»å‹

- åŸå§‹ç±»å‹ï¼š`stringã€booleanã€numberã€bigintã€objectã€symbolã€null å’Œ undefined`

- ç‰¹ç‚¹ï¼šç®€å•ï¼Œè¿™äº›ç±»å‹ï¼Œå®Œå…¨æŒ‰ç…§ JS ä¸­ç±»å‹çš„åç§°æ¥ä¹¦å†™

- number

  - ```typescript
    let decimal: number = 6;
    let hex: number = 0xf00d;
    let binary: number = 0b1010;
    let octal: number = 0o744;
    let big: bigint = 100n;
    ```

- boolean

  - ```typescript
    let isDone: boolean = false;
    ```

- string

  - ```typescript
    let color: string = "blue";
    color = 'red';
    
    let fullName: string = `Bob Bobbington`;
    let age: number = 37;
    let sentence: string = `Hello, my name is ${fullName}.
    
    I'll be ${age + 1} years old next month.`;
    ```

- å…¶å®ƒ

  - ```typescript
    let a: null = null
    let b: undefined = undefined
    let obj: object = {x: 1}
    let s: symbol = Symbol()
    ```

> å¯¹è±¡ç±»å‹ï¼šobjectï¼ˆåŒ…æ‹¬ï¼Œæ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ç­‰å¯¹è±¡ï¼‰ã€‚
>
> ç‰¹ç‚¹ï¼šå¯¹è±¡ç±»å‹ï¼Œåœ¨TSä¸­æ›´åŠ ç»†åŒ–ï¼Œæ¯ä¸ªå…·ä½“çš„å¯¹è±¡éƒ½æœ‰è‡ªå·±çš„ç±»å‹è¯­æ³•ã€‚

### 3.3.2æ³¨æ„ç‚¹

**nullå’Œundefined**

é»˜è®¤æƒ…å†µä¸‹ `null` å’Œ `undefined` æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ `null` å’Œ `undefined` èµ‹å€¼ç»™å…¶ä»–ç±»å‹ã€‚

```typescript
// nullå’Œundefinedèµ‹å€¼ç»™string
let str:string = "666";
str = null
str= undefined

// nullå’Œundefinedèµ‹å€¼ç»™number
let num:number = 666;
num = null
num= undefined

// nullå’Œundefinedèµ‹å€¼ç»™object
let obj:object ={};
obj = null
obj= undefined

// nullå’Œundefinedèµ‹å€¼ç»™Symbol
let sym: symbol = Symbol("me"); 
sym = null
sym= undefined

// nullå’Œundefinedèµ‹å€¼ç»™boolean
let isDone: boolean = false;
isDone = null
isDone= undefined

// nullå’Œundefinedèµ‹å€¼ç»™bigint
let big: bigint =  100n;
big = null
big= undefined
```

å¦‚æœä½ åœ¨tsconfig.jsonæŒ‡å®šäº†`"strictNullChecks":true` ï¼Œ`null` å’Œ `undefined` åªèƒ½èµ‹å€¼ç»™ `void` å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚

**numberå’Œbigint**

è™½ç„¶`number`å’Œ`bigint`éƒ½è¡¨ç¤ºæ•°å­—ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç±»å‹ä¸å…¼å®¹ã€‚

```typescript
let big: bigint =  100n;
let num: number = 6;
big = num;
num = big;
```

ä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹ä¸å…¼å®¹çš„ `ts(2322)` é”™è¯¯ã€‚

## 3.4 æ•°ç»„ç±»å‹

æ•°ç»„ç±»å‹çš„ä¸¤ç§å†™æ³•ï¼š(**æ¨èä½¿ç”¨number[]å†™æ³•**)

```typescript
let numbers: number[] = [1,2,3]
let string: Array<string> = ["a","b","c"]
```

å®šä¹‰è”åˆç±»å‹æ•°ç»„

```typescript
let arr:(number | string)[];
// è¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªåç§°å«åšarrçš„æ•°ç»„, 
// è¿™ä¸ªæ•°ç»„ä¸­å°†æ¥æ—¢å¯ä»¥å­˜å‚¨æ•°å€¼ç±»å‹çš„æ•°æ®, ä¹Ÿå¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®
arr3 = [1, 'b', 2, 'c'];
```

å®šä¹‰æŒ‡å®šå¯¹è±¡æˆå‘˜çš„æ•°ç»„ï¼š

```typescript
// interfaceæ˜¯æ¥å£,æœ€åé¢ä¼šè®²åˆ°
interface Arrobj{
    name:string,
    age:number
}
let arr3:Arrobj[]=[{name:'jimmy',age:22}]
```

## 3.5 è”åˆç±»å‹ä¸äº¤å‰ç±»å‹

### 3.5.1 è”åˆç±»å‹

è”åˆç±»å‹è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ï¼Œä½¿ç”¨ `|` åˆ†éš”æ¯ä¸ªç±»å‹ã€‚

éœ€æ±‚ï¼šæ•°ç»„ä¸­æ—¢æœ‰ number ç±»å‹ï¼Œåˆæœ‰ string ç±»å‹ï¼Œè¿™ä¸ªæ•°ç»„çš„ç±»å‹åº”è¯¥å¦‚ä½•å†™?

```ts
let arr: (number | string)[] = [1, 'a', 3, 'b']
```

- è§£é‡Šï¼š`|`ï¼ˆç«–çº¿ï¼‰åœ¨ TS ä¸­å«åš**è”åˆç±»å‹**ï¼Œå³ï¼šç”±ä¸¤ä¸ªæˆ–å¤šä¸ªå…¶ä»–ç±»å‹ç»„æˆçš„ç±»å‹ï¼Œè¡¨ç¤ºå¯ä»¥æ˜¯è¿™äº›ç±»å‹ä¸­çš„ä»»æ„ä¸€ç§
- æ³¨æ„ï¼šè¿™æ˜¯ TS ä¸­è”åˆç±»å‹çš„è¯­æ³•ï¼Œåªæœ‰ä¸€æ ¹ç«–çº¿ï¼Œä¸è¦ä¸ JS ä¸­çš„æˆ–ï¼ˆ|| æˆ–ï¼‰æ··æ·†äº†

```jsx
  let timer: number | null = null
  timer = setInterval(() => {}, 1000)

  // å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­å¯ä»¥æœ‰æ•°å­—æˆ–è€…å­—ç¬¦ä¸², éœ€è¦æ³¨æ„ | çš„ä¼˜å…ˆçº§
  let arr: (number | string)[] = [1, 'abc', 2]
```

è”åˆç±»å‹é€šå¸¸ä¸ `null` æˆ– `undefined` ä¸€èµ·ä½¿ç”¨ï¼š

```js
const sayHello = (name: string | undefined) => {
  /* ... */
};
```

ä¾‹å¦‚ï¼Œè¿™é‡Œ `name` çš„ç±»å‹æ˜¯ `string | undefined` æ„å‘³ç€å¯ä»¥å°† `string` æˆ– `undefined` çš„å€¼ä¼ é€’ç»™`sayHello` å‡½æ•°ã€‚

```js
sayHello("semlinker"); 
sayHello(undefined);
```

é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œä½ å¯ä»¥å‡­ç›´è§‰çŸ¥é“ç±»å‹ A å’Œç±»å‹ B è”åˆåçš„ç±»å‹æ˜¯åŒæ—¶æ¥å— A å’Œ B å€¼çš„ç±»å‹ã€‚æ­¤å¤–ï¼Œå¯¹äºè”åˆç±»å‹æ¥è¯´ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹çš„ç”¨æ³•ï¼š

```js
let num: 1 | 2 = 1;
type EventNames = 'click' | 'scroll' | 'mousemove';
```

ä»¥ä¸Šç¤ºä¾‹ä¸­çš„ `1`ã€`2` æˆ– `'click'` è¢«ç§°ä¸ºå­—é¢é‡ç±»å‹ï¼Œç”¨æ¥çº¦æŸå–å€¼åªèƒ½æ˜¯æŸå‡ ä¸ªå€¼ä¸­çš„ä¸€ä¸ªã€‚

### 3.5.1 äº¤å‰ç±»å‹

äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚ è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ï¼Œä½¿ç”¨`&`å®šä¹‰äº¤å‰ç±»å‹ã€‚

```ts
{
  type Useless = string & number;
}
```

å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…æŠŠåŸå§‹ç±»å‹ã€å­—é¢é‡ç±»å‹ã€å‡½æ•°ç±»å‹ç­‰åŸå­ç±»å‹åˆå¹¶æˆäº¤å‰ç±»å‹ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•ç”¨å¤„çš„ï¼Œå› ä¸ºä»»ä½•ç±»å‹éƒ½ä¸èƒ½æ»¡è¶³åŒæ—¶å±äºå¤šç§åŸå­ç±»å‹ï¼Œæ¯”å¦‚æ—¢æ˜¯ string ç±»å‹åˆæ˜¯ number ç±»å‹ã€‚å› æ­¤ï¼Œåœ¨ä¸Šè¿°çš„ä»£ç ä¸­ï¼Œç±»å‹åˆ«å Useless çš„ç±»å‹å°±æ˜¯ä¸ª neverã€‚

äº¤å‰ç±»å‹çœŸæ­£çš„ç”¨æ­¦ä¹‹åœ°å°±æ˜¯å°†å¤šä¸ªæ¥å£ç±»å‹åˆå¹¶æˆä¸€ä¸ªç±»å‹ï¼Œä»è€Œå®ç°ç­‰åŒæ¥å£ç»§æ‰¿çš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„åˆå¹¶æ¥å£ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```ts
  type IntersectionType = { id: number; name: string; } & { age: number };
  const mixed: IntersectionType = {
    id: 1,
    name: 'name',
    age: 18
  }

```

åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡äº¤å‰ç±»å‹ï¼Œä½¿å¾— IntersectionType åŒæ—¶æ‹¥æœ‰äº† idã€nameã€age æ‰€æœ‰å±æ€§ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥è¯•ç€å°†åˆå¹¶æ¥å£ç±»å‹ç†è§£ä¸ºæ±‚å¹¶é›†ã€‚

## 3.6 ç±»å‹åˆ«å

- `ç±»å‹åˆ«åï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰`ï¼šç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚(ç±»å‹åˆ«åå¸¸ç”¨äºè”åˆç±»å‹ã€‚)
- ä½¿ç”¨åœºæ™¯ï¼šå½“åŒä¸€ç±»å‹ï¼ˆå¤æ‚ï¼‰è¢«å¤šæ¬¡ä½¿ç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å‹åˆ«åï¼Œ**ç®€åŒ–è¯¥ç±»å‹çš„ä½¿ç”¨**

```ts
type CustomArray = (number | string)[]

let arr1: CustomArray = [1, 'a', 3, 'b']
let arr2: CustomArray = ['x', 'y', 6, 7]


type Message = string | string[];
let greet = (message: Message) => {
  // ...
};
```

- è§£é‡Š:
  1. ä½¿ç”¨ `type` å…³é”®å­—æ¥åˆ›å»ºè‡ªå®šä¹‰ç±»å‹
  2. ç±»å‹åˆ«åï¼ˆæ¯”å¦‚ï¼Œæ­¤å¤„çš„ *CustomArray*ï¼‰å¯ä»¥æ˜¯ä»»æ„åˆæ³•çš„å˜é‡åç§°
  3. æ¨èä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´
  4. åˆ›å»ºç±»å‹åˆ«ååï¼Œç›´æ¥ä½¿ç”¨è¯¥ç±»å‹åˆ«åä½œä¸ºå˜é‡çš„ç±»å‹æ³¨è§£å³å¯

> **æ³¨æ„ï¼šç±»å‹åˆ«åï¼Œè¯šå¦‚å…¶åï¼Œå³æˆ‘ä»¬ä»…ä»…æ˜¯ç»™ç±»å‹å–äº†ä¸€ä¸ªæ–°çš„åå­—ï¼Œå¹¶ä¸æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç±»å‹ã€‚**

##  3.7 å‡½æ•°ç±»å‹

### 3.7.1 åŸºæœ¬ä½¿ç”¨

- å‡½æ•°çš„ç±»å‹å®é™…ä¸ŠæŒ‡çš„æ˜¯ï¼š`å‡½æ•°å‚æ•°`å’Œ`è¿”å›å€¼`çš„ç±»å‹
- ä¸ºå‡½æ•°æŒ‡å®šç±»å‹çš„ä¸¤ç§æ–¹å¼ï¼š
  1. å•ç‹¬æŒ‡å®šå‚æ•°ã€è¿”å›å€¼çš„ç±»å‹
  2. åŒæ—¶æŒ‡å®šå‚æ•°ã€è¿”å›å€¼çš„ç±»å‹

1. å•ç‹¬æŒ‡å®šå‚æ•°ã€è¿”å›å€¼çš„ç±»å‹ï¼š

```ts
// å‡½æ•°å£°æ˜
function add(a: number, b: number): number {
  return a + b
}

// å‡½æ•°è¡¨è¾¾å¼
let mySum: (x: number, y: number) => number = function (x, y) {
    return x + y;
};

// ç®­å¤´å‡½æ•°
const add = (a: number, b: number): number => {
  return a + b
}
```

2. åŒæ—¶æŒ‡å®šå‚æ•°ã€è¿”å›å€¼çš„ç±»å‹:

```ts
type AddFn = (a: number, b: number) => number

const add: AddFn = (a, b) => {
  return a + b
}
```

- è§£é‡Šï¼šå½“å‡½æ•°ä½œä¸ºè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»ä¼¼ç®­å¤´å‡½æ•°å½¢å¼çš„è¯­æ³•æ¥ä¸ºå‡½æ•°æ·»åŠ ç±»å‹
- æ³¨æ„ï¼šè¿™ç§å½¢å¼åªé€‚ç”¨äºå‡½æ•°è¡¨è¾¾å¼

3. ç”¨æ¥å£å®šä¹‰å‡½æ•°ç±»å‹

```typescript
interface ISearchFunc{
  (source: string, subString: string): boolean;
}
```

é‡‡ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å£å®šä¹‰å‡½æ•°çš„æ–¹å¼æ—¶ï¼Œå¯¹ç­‰å·å·¦ä¾§è¿›è¡Œç±»å‹é™åˆ¶ï¼Œå¯ä»¥ä¿è¯ä»¥åå¯¹å‡½æ•°åèµ‹å€¼æ—¶ä¿è¯å‚æ•°ä¸ªæ•°ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä¸å˜ã€‚

### 3.7.2 void ç±»å‹

- `void`è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ï¼Œå’Œå…¶ä»–ç±»å‹æ˜¯å¹³ç­‰å…³ç³»ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼:

  ```typescript
  letÂ a: void; 
  letÂ b: number = a; // Error
  ```

  ä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ`null`å’Œ`undefined`ï¼ˆåœ¨`strictNullChecks`æœªæŒ‡å®šä¸ºtrueæ—¶ï¼‰ã€‚å£°æ˜ä¸€ä¸ª`void`ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿåªæœ‰åœ¨å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶å»å£°æ˜ã€‚

- å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆï¼Œå‡½æ•°è¿”å›å€¼ç±»å‹ä¸ºï¼š`void`

```ts
function greet(name: string): void {
  console.log('Hello', name)
}
```

- å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ–¹æ³•æ²¡æœ‰è¿”å›å€¼å°†å¾—åˆ°`undefined`ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å®šä¹‰æˆ`void`ç±»å‹ï¼Œè€Œä¸æ˜¯`undefined`ç±»å‹ã€‚å¦åˆ™å°†æŠ¥é”™:

```ts
// å¦‚æœä»€ä¹ˆéƒ½ä¸å†™ï¼Œæ­¤æ—¶ï¼Œadd å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸ºï¼š void
const add = () => {}
// è¿™ç§å†™æ³•æ˜¯æ˜ç¡®æŒ‡å®šå‡½æ•°è¿”å›å€¼ç±»å‹ä¸º voidï¼Œä¸ä¸Šé¢ä¸æŒ‡å®šè¿”å›å€¼ç±»å‹ç›¸åŒ
const add = (): void => {}

function fun(): undefined {
  console.log("this is TypeScript");
};
fun(); // Error

// ä½†ï¼Œå¦‚æœæŒ‡å®š è¿”å›å€¼ç±»å‹ä¸º undefinedï¼Œæ­¤æ—¶ï¼Œå‡½æ•°ä½“ä¸­å¿…é¡»æ˜¾ç¤ºçš„ return undefined æ‰å¯ä»¥
const add = (): undefined => {
  // æ­¤å¤„ï¼Œè¿”å›çš„ undefined æ˜¯ JS ä¸­çš„ä¸€ä¸ªå€¼
  return undefined
}
```

### 3.7.3 never ç±»å‹

- void ç”¨æ¥è¡¨ç¤ºç©ºï¼Œä»¥å‡½æ•°ä¸ºä¾‹ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°
- never ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚

å€¼ä¼šæ°¸ä¸å­˜åœ¨çš„ä¸¤ç§æƒ…å†µï¼š

1. å¦‚æœä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶æŠ›å‡ºäº†**å¼‚å¸¸**ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æ°¸è¿œä¸å­˜åœ¨è¿”å›å€¼ï¼ˆå› ä¸ºæŠ›å‡ºå¼‚å¸¸ä¼šç›´æ¥ä¸­æ–­ç¨‹åºè¿è¡Œï¼Œè¿™ä½¿å¾—ç¨‹åºè¿è¡Œä¸åˆ°è¿”å›å€¼é‚£ä¸€æ­¥ï¼Œå³å…·æœ‰ä¸å¯è¾¾çš„ç»ˆç‚¹ï¼Œä¹Ÿå°±æ°¸ä¸å­˜åœ¨è¿”å›äº†ï¼‰ï¼›
2. å‡½æ•°ä¸­æ‰§è¡Œæ— é™å¾ªç¯çš„ä»£ç ï¼ˆ**æ­»å¾ªç¯**ï¼‰ï¼Œä½¿å¾—ç¨‹åºæ°¸è¿œæ— æ³•è¿è¡Œåˆ°å‡½æ•°è¿”å›å€¼é‚£ä¸€æ­¥ï¼Œæ°¸ä¸å­˜åœ¨è¿”å›ã€‚

```typescript
// å¼‚å¸¸
function err(msg: string): never { // OK
  throw new Error(msg); 
}

// æ­»å¾ªç¯
function loopForever(): never { // OK
  while (true) {};
}
```

`never`ç±»å‹åŒ`null`å’Œ`undefined`ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚

ä½†æ˜¯æ²¡æœ‰ç±»å‹æ˜¯`never`çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™`never`ç±»å‹ï¼ˆé™¤äº†`never`æœ¬èº«ä¹‹å¤–ï¼‰ï¼Œå³ä½¿`any`ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™`never`

```typescript
let ne: never;
let nev: never;
let an: any;

ne = 123; // Error
ne = nev; // OK
ne = an; // Error
ne = (() => { throw new Error("å¼‚å¸¸"); })(); // OK
ne = (() => { while(true) {} })(); // OK
```

åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ never ç±»å‹çš„ç‰¹æ€§æ¥å®ç°å…¨é¢æ€§æ£€æŸ¥ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```typescript
type Foo = string | number;

function controlFlowAnalysisWithNever(foo: Foo) {
  if (typeof foo === "string") {
    // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹
  } else if (typeof foo === "number") {
    // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹
  } else {
    // foo åœ¨è¿™é‡Œæ˜¯ never
    const check: never = foo;
  }
}
```

æ³¨æ„åœ¨ else åˆ†æ”¯é‡Œé¢ï¼Œæˆ‘ä»¬æŠŠæ”¶çª„ä¸º never çš„ foo èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾ç¤ºå£°æ˜çš„ never å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹ä¿®æ”¹äº† Foo çš„ç±»å‹ï¼š

```typescript
type Foo = string | number | boolean;
```

ç„¶è€Œä»–å¿˜è®°åŒæ—¶ä¿®æ”¹ `controlFlowAnalysisWithNever` æ–¹æ³•ä¸­çš„æ§åˆ¶æµç¨‹ï¼Œè¿™æ—¶å€™ else åˆ†æ”¯çš„ foo ç±»å‹ä¼šè¢«æ”¶çª„ä¸º `boolean` ç±»å‹ï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ never ç±»å‹ï¼Œè¿™æ—¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿`controlFlowAnalysisWithNever` æ–¹æ³•æ€»æ˜¯ç©·å°½äº† Foo çš„æ‰€æœ‰å¯èƒ½ç±»å‹ã€‚ é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š**ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚**

æ¯”è¾ƒ:`void`å’Œ`never`

```typescript
// void ç”¨æ¥è¡¨ç¤ºç©ºï¼Œä»¥å‡½æ•°ä¸ºä¾‹ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°
function fn(): void {
  console.log('hello');
  return undefined;
  return;
}

// never è¡¨ç¤ºæ°¸è¿œä¸ä¼šè¿”å›ç»“æœ
function fn1(): never {
  throw new Error('å‡ºé”™å•¦ï¼');
}
```

### 3.7.4 å¯é€‰å‚æ•°

- ä½¿ç”¨å‡½æ•°å®ç°æŸä¸ªåŠŸèƒ½æ—¶ï¼Œå‚æ•°å¯ä»¥ä¼ ä¹Ÿå¯ä»¥ä¸ä¼ ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ç»™å‡½æ•°å‚æ•°æŒ‡å®šç±»å‹æ—¶ï¼Œå°±ç”¨åˆ°**å¯é€‰å‚æ•°**äº†
- æ¯”å¦‚ï¼Œæ•°ç»„çš„ slice æ–¹æ³•ï¼Œå¯ä»¥ `slice()` ä¹Ÿå¯ä»¥ `slice(1)` è¿˜å¯ä»¥ `slice(1, 3)`

```ts
function buildName(firstName: string, lastName?: string) {
    if (lastName) {
        return firstName + ' ' + lastName;
    } else {
        return firstName;
    }
}
let tomcat = buildName('Tom', 'Cat');
let tom = buildName('Tom');
```

- å¯é€‰å‚æ•°ï¼šåœ¨å¯ä¼ å¯ä¸ä¼ çš„å‚æ•°åç§°åé¢æ·»åŠ  `?`ï¼ˆé—®å·ï¼‰
- æ³¨æ„ï¼š**å¯é€‰å‚æ•°åªèƒ½å‡ºç°åœ¨å‚æ•°åˆ—è¡¨çš„æœ€å**ï¼Œä¹Ÿå°±æ˜¯è¯´å¯é€‰å‚æ•°åé¢ä¸èƒ½å†å‡ºç°å¿…é€‰å‚æ•°

### 3.7.5 å‚æ•°é»˜è®¤å€¼

```typescript
function buildName(firstName: string, lastName = 'Cat') {
    return firstName + ' ' + lastName;
}
let tomcat = buildName('Tom', 'Cat');
let tom = buildName('Tom');
```

> é»˜è®¤å€¼ä¼šè‡ªåŠ¨åˆ¤æ–­ç±»å‹

### 3.7.6 å‰©ä½™å‚æ•°

```typescript
function push(array: any[], ...items: any[]) {
    items.forEach(function(item) {
        array.push(item);
    });
}
let a = [];
push(a, 1, 2, 3);
```

### 3.7.7 å‡½æ•°é‡è½½

ç”±äº JavaScript æ˜¯ä¸€ä¸ªåŠ¨æ€è¯­è¨€ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸åŒç±»å‹çš„å‚æ•°æ¥è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ®ä¸åŒçš„å‚æ•°è€Œè¿”å›ä¸åŒçš„ç±»å‹çš„è°ƒç”¨ç»“æœï¼š

```js
function add(x, y) {
 return x + y;
}
add(1, 2); // 3
add("1", "2"); //"12"
```

ç”±äº TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œå› æ­¤ä»¥ä¸Šçš„ä»£ç å¯ä»¥ç›´æ¥åœ¨ TypeScript ä¸­ä½¿ç”¨ï¼Œä½†å½“ TypeScript ç¼–è¯‘å™¨å¼€å¯ `noImplicitAny` çš„é…ç½®é¡¹æ—¶ï¼Œä»¥ä¸Šä»£ç ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š

```js
Parameter 'x' implicitly has an 'any' type.
Parameter 'y' implicitly has an 'any' type.
```

è¯¥ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬å‚æ•° x å’Œå‚æ•° y éšå¼å…·æœ‰ `any` ç±»å‹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå‚æ•°è®¾ç½®ä¸€ä¸ªç±»å‹ã€‚å› ä¸ºæˆ‘ä»¬å¸Œæœ› `add` å‡½æ•°åŒæ—¶æ”¯æŒ string å’Œ number ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª `string | number` è”åˆç±»å‹ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸ºè¯¥è”åˆç±»å‹å–ä¸ªåˆ«åï¼š

```ts
type Combinable = string | number;
```

åœ¨å®šä¹‰å®Œ Combinable è”åˆç±»å‹åï¼Œæˆ‘ä»¬æ¥æ›´æ–°ä¸€ä¸‹ `add` å‡½æ•°ï¼š

```ts
function add(a: Combinable, b: Combinable) {
    if (typeof a === 'string' || typeof b === 'string') {
     return a.toString() + b.toString();
    }
    return a + b;
}
```

ä¸º `add` å‡½æ•°çš„å‚æ•°æ˜¾å¼è®¾ç½®ç±»å‹ä¹‹åï¼Œä¹‹å‰é”™è¯¯çš„æç¤ºæ¶ˆæ¯å°±æ¶ˆå¤±äº†ã€‚é‚£ä¹ˆæ­¤æ—¶çš„ `add` å‡½æ•°å°±å®Œç¾äº†ä¹ˆï¼Œæˆ‘ä»¬æ¥å®é™…æµ‹è¯•ä¸€ä¸‹ï¼š

```ts
const result = add('Semlinker', ' Kakuqo');
result.split(' ');
```

åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨ `'Semlinker'` å’Œ `' Kakuqo'` è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°è°ƒç”¨ add å‡½æ•°ï¼Œå¹¶æŠŠè°ƒç”¨ç»“æœä¿å­˜åˆ°ä¸€ä¸ªåä¸º `result` çš„å˜é‡ä¸Šï¼Œè¿™æ—¶å€™æˆ‘ä»¬æƒ³å½“ç„¶çš„è®¤ä¸ºæ­¤æ—¶ result çš„å˜é‡çš„ç±»å‹ä¸º stringï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥æ­£å¸¸è°ƒç”¨å­—ç¬¦ä¸²å¯¹è±¡ä¸Šçš„ `split` æ–¹æ³•ã€‚ä½†è¿™æ—¶ TypeScript ç¼–è¯‘å™¨åˆå‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯äº†ï¼š

```ts
Property 'split' does not exist on type 'number'.
```

å¾ˆæ˜æ˜¾ `number` ç±»å‹çš„å¯¹è±¡ä¸Šå¹¶ä¸å­˜åœ¨ `split` å±æ€§ã€‚é—®é¢˜åˆæ¥äº†ï¼Œé‚£å¦‚ä½•è§£å†³å‘¢ï¼Ÿè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ TypeScript æä¾›çš„å‡½æ•°é‡è½½ç‰¹æ€§ã€‚

> **å‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚** è¦è§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ï¼Œæ–¹æ³•å°±æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚

```ts
type Types = number | string
function add(a:number,b:number):number;
function add(a: string, b: string): string;
function add(a: string, b: number): string;
function add(a: number, b: string): string;
function add(a:Types, b:Types) {
  if (typeof a === 'string' || typeof b === 'string') {
    return a.toString() + b.toString();
  }
  return a + b;
}
const result = add('Semlinker', ' Kakuqo');
result.split(' ');
```

åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸º add å‡½æ•°æä¾›äº†å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰ï¼Œä»è€Œå®ç°å‡½æ•°çš„é‡è½½ã€‚ä¹‹åï¼Œå¯æ¶çš„é”™è¯¯æ¶ˆæ¯åˆæ¶ˆå¤±äº†ï¼Œå› ä¸ºè¿™æ—¶ result å˜é‡çš„ç±»å‹æ˜¯ `string` ç±»å‹ã€‚

## 3.8 ç±»å‹æ¨æ–­

```typescript
{
  let str: string = 'this is string';
  let num: number = 1;
  let bool: boolean = true;
}
{
  const str: string = 'this is string';
  const num: number = 1;
  const bool: boolean = true;
}
```

çœ‹ç€ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå¯èƒ½ä½ å·²ç»åœ¨å˜€å’•äº†ï¼šå®šä¹‰åŸºç¡€ç±»å‹çš„å˜é‡éƒ½éœ€è¦å†™æ˜ç±»å‹æ³¨è§£ï¼ŒTypeScript å¤ªéº»çƒ¦äº†å§ï¼Ÿåœ¨ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ let å®šä¹‰å˜é‡æ—¶ï¼Œæˆ‘ä»¬å†™æ˜ç±»å‹æ³¨è§£ä¹Ÿå°±ç½¢äº†ï¼Œæ¯•ç«Ÿå€¼å¯èƒ½ä¼šè¢«æ”¹å˜ã€‚å¯æ˜¯ï¼Œä½¿ç”¨ `const` å¸¸é‡æ—¶è¿˜éœ€è¦å†™æ˜ç±»å‹æ³¨è§£ï¼Œé‚£å¯çœŸçš„å¾ˆéº»çƒ¦ã€‚

å®é™…ä¸Šï¼ŒTypeScript æ—©å°±è€ƒè™‘åˆ°äº†è¿™ä¹ˆç®€å•è€Œæ˜æ˜¾çš„é—®é¢˜ã€‚

- åœ¨å¾ˆå¤šæƒ…å†µä¸‹, TS æŸäº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œ**TS çš„ç±»å‹æ¨æ–­æœºåˆ¶ä¼šå¸®åŠ©æä¾›ç±»å‹**
- æ¢å¥è¯è¯´ï¼šç”±äºç±»å‹æ¨æ–­çš„å­˜åœ¨ï¼Œè¿™äº›åœ°æ–¹ï¼Œç±»å‹æ³¨è§£å¯ä»¥çœç•¥ä¸å†™
- å‘ç”Ÿç±»å‹æ¨æ–­çš„ 2 ç§å¸¸è§åœºæ™¯:
  1. å…·æœ‰åˆå§‹åŒ–å€¼çš„å˜é‡
  2. æœ‰é»˜è®¤å€¼çš„å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›çš„ç±»å‹éƒ½å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­å‡ºæ¥ã€‚

```ts
{
  let str = 'this is string'; // ç­‰ä»·
  let num = 1; // ç­‰ä»·
  let bool = true; // ç­‰ä»·
}
{
  const str = 'this is string'; // ä¸ç­‰ä»·
  const num = 1; // ä¸ç­‰ä»·
  const bool = true; // ä¸ç­‰ä»·
}

```

æˆ‘ä»¬èƒ½æ ¹æ® return è¯­å¥æ¨æ–­å‡½æ•°è¿”å›çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```typescript
{
  /** æ ¹æ®å‚æ•°çš„ç±»å‹ï¼Œæ¨æ–­å‡ºè¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯ number */
  function add1(a: number, b: number) {
    return a + b;
  }
  const x1= add1(1, 1); // æ¨æ–­å‡º x1 çš„ç±»å‹ä¹Ÿæ˜¯ number
  
  /** æ¨æ–­å‚æ•° b çš„ç±»å‹æ˜¯æ•°å­—æˆ–è€… undefinedï¼Œè¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯æ•°å­— */
  function add2(a: number, b = 1) {
    return a + b;
  }
  const x2 = add2(1);
  const x3 = add2(1, '1'); // ts(2345) Argument of type "1" is not assignable to parameter of type 'number | undefined
}
```

æˆ‘ä»¬æŠŠ TypeScript è¿™ç§åŸºäºèµ‹å€¼è¡¨è¾¾å¼æ¨æ–­ç±»å‹çš„èƒ½åŠ›ç§°ä¹‹ä¸º`ç±»å‹æ¨æ–­`ã€‚

> å¦‚æœå®šä¹‰çš„æ—¶å€™æ²¡æœ‰èµ‹å€¼ï¼Œä¸ç®¡ä¹‹åæœ‰æ²¡æœ‰èµ‹å€¼ï¼Œéƒ½ä¼šè¢«æ¨æ–­æˆ `any` ç±»å‹è€Œå®Œå…¨ä¸è¢«ç±»å‹æ£€æŸ¥ï¼š
>
> ```typescript
> let myFavoriteNumber;
> myFavoriteNumber = 'seven';
> myFavoriteNumber = 7;
> ```

- æ¨èï¼š**èƒ½çœç•¥ç±»å‹æ³¨è§£çš„åœ°æ–¹å°±çœç•¥**ï¼ˆ~~å·æ‡’~~ï¼Œå……åˆ†åˆ©ç”¨TSç±»å‹æ¨æ–­çš„èƒ½åŠ›ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼‰
- æŠ€å·§ï¼šå¦‚æœä¸çŸ¥é“ç±»å‹ï¼Œå¯ä»¥é€šè¿‡é¼ æ ‡æ‚¬åœåœ¨å˜é‡åç§°ä¸Šï¼Œåˆ©ç”¨ VSCode çš„æç¤ºæ¥æŸ¥çœ‹ç±»å‹

##  3.9 å¯¹è±¡ç±»å‹

### 3.9.1 åŸºæœ¬ä½¿ç”¨

- JS ä¸­çš„å¯¹è±¡æ˜¯ç”±å±æ€§å’Œæ–¹æ³•æ„æˆçš„ï¼Œè€Œ **TS å¯¹è±¡çš„ç±»å‹å°±æ˜¯åœ¨æè¿°å¯¹è±¡çš„ç»“æ„**ï¼ˆæœ‰ä»€ä¹ˆç±»å‹çš„å±æ€§å’Œæ–¹æ³•ï¼‰
- å¯¹è±¡ç±»å‹çš„å†™æ³•:

```ts
// ç©ºå¯¹è±¡
let person: {} = {}

// æœ‰å±æ€§çš„å¯¹è±¡
let person: { name: string } = {
  name: 'åŒå­¦'
}

// æ—¢æœ‰å±æ€§åˆæœ‰æ–¹æ³•çš„å¯¹è±¡
// åœ¨ä¸€è¡Œä»£ç ä¸­æŒ‡å®šå¯¹è±¡çš„å¤šä¸ªå±æ€§ç±»å‹æ—¶ï¼Œä½¿ç”¨ `;`ï¼ˆåˆ†å·ï¼‰æ¥åˆ†éš”
let person: { name: string; sayHi(): void } = {
  name: 'jack',
  sayHi() {}
}

// å¯¹è±¡ä¸­å¦‚æœæœ‰å¤šä¸ªç±»å‹ï¼Œå¯ä»¥æ¢è¡Œå†™ï¼š
// é€šè¿‡æ¢è¡Œæ¥åˆ†éš”å¤šä¸ªå±æ€§ç±»å‹ï¼Œå¯ä»¥å»æ‰ `;`
let person: {
  name: string
  sayHi(): void
} = {
  name: 'jack',
  sayHi() {}
}
```

- è§£é‡Š:
  1. ä½¿ç”¨ `{}` æ¥æè¿°å¯¹è±¡ç»“æ„
  2. å±æ€§é‡‡ç”¨`å±æ€§å: ç±»å‹`çš„å½¢å¼
  3. æ–¹æ³•é‡‡ç”¨`æ–¹æ³•å(): è¿”å›å€¼ç±»å‹`çš„å½¢å¼

### 3.9.2 ç®­å¤´å‡½æ•°å½¢å¼çš„æ–¹æ³•ç±»å‹

- æ–¹æ³•çš„ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°å½¢å¼

```ts
{
    greet(name: string):string
    greet: (name: string) => string
}



type Person = {
  greet: (name: string) => void;
  greet(name: string):void;
}

let person: Person = {
  greet(name) {
    console.log(name)
  }
}
```

### 3.9.3 å¯¹è±¡å¯é€‰å±æ€§

- å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯é€‰çš„ï¼Œæ­¤æ—¶å°±ç”¨åˆ°**å¯é€‰å±æ€§**äº†
- æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ `axios({ ... })` æ—¶ï¼Œå¦‚æœå‘é€ GET è¯·æ±‚ï¼Œmethod å±æ€§å°±å¯ä»¥çœç•¥
- å¯é€‰å±æ€§çš„è¯­æ³•ä¸å‡½æ•°å¯é€‰å‚æ•°çš„è¯­æ³•ä¸€è‡´ï¼Œéƒ½ä½¿ç”¨ `?` æ¥è¡¨ç¤º

```ts
type Config = {
  url: string
  method?: string
}

function axios(config: Config) {
  console.log(config)
}

```

### 3.9.4 ä½¿ç”¨ç±»å‹åˆ«å

- æ³¨æ„ï¼šç›´æ¥ä½¿ç”¨ `{}` å½¢å¼ä¸ºå¯¹è±¡æ·»åŠ ç±»å‹ï¼Œä¼šé™ä½ä»£ç çš„å¯è¯»æ€§ï¼ˆä¸å¥½è¾¨è¯†ç±»å‹å’Œå€¼ï¼‰
- æ¨èï¼š**ä½¿ç”¨ç±»å‹åˆ«åä¸ºå¯¹è±¡æ·»åŠ ç±»å‹**

```ts
// åˆ›å»ºç±»å‹åˆ«å
type Person = {
  name: string
  sayHi(): void
}

// ä½¿ç”¨ç±»å‹åˆ«åä½œä¸ºå¯¹è±¡çš„ç±»å‹ï¼š
let person: Person = {
  name: 'jack',
  sayHi() {}
}
```

### 3.9.5 ä»»æ„å±æ€§

æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªå¯¹è±¡ä¸­é™¤äº†åŒ…å«å¿…é€‰å’Œå¯é€‰å±æ€§ä¹‹å¤–ï¼Œè¿˜å…è®¸æœ‰å…¶ä»–çš„ä»»æ„å±æ€§ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **ç´¢å¼•ç­¾å** çš„å½¢å¼æ¥æ»¡è¶³ä¸Šè¿°è¦æ±‚ã€‚

```js
// [propName: string]: any è¡¨ç¤ºä»»æ„ç±»å‹çš„å±æ€§
let c: {name: string, [propName: string]: any};
c = {name: 'çŒªå…«æˆ’', age: 18, gender: 'ç”·'};
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**ä¸€æ—¦å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§çš„ç±»å‹éƒ½å¿…é¡»æ˜¯å®ƒçš„ç±»å‹çš„å­é›†**

## 3.10 å…ƒç»„ç±»å‹

### 3.10.1 å…ƒç¥–å®šä¹‰

ä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°ç»„ä¸€èˆ¬ç”±åŒç§ç±»å‹çš„å€¼ç»„æˆï¼Œä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å…ƒç»„ã€‚åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰å…ƒç»„çš„ï¼Œå…ƒç»„æ˜¯ TypeScript ä¸­ç‰¹æœ‰çš„ç±»å‹ï¼Œå…¶å·¥ä½œæ–¹å¼ç±»ä¼¼äºæ•°ç»„ã€‚

å…ƒç»„æœ€é‡è¦çš„ç‰¹æ€§æ˜¯å¯ä»¥é™åˆ¶`æ•°ç»„å…ƒç´ çš„ä¸ªæ•°å’Œç±»å‹`ï¼Œå®ƒç‰¹åˆ«é€‚åˆç”¨æ¥å®ç°å¤šå€¼è¿”å›ã€‚

- åœºæ™¯ï¼šåœ¨åœ°å›¾ä¸­ï¼Œä½¿ç”¨ç»çº¬åº¦åæ ‡æ¥æ ‡è®°ä½ç½®ä¿¡æ¯
- å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥è®°å½•åæ ‡ï¼Œé‚£ä¹ˆï¼Œè¯¥æ•°ç»„ä¸­åªæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå…ƒç´ éƒ½æ˜¯æ•°å€¼ç±»å‹

```ts
let position: number[] = [116.2317, 39.5427]
```

- ä½¿ç”¨ number[] çš„ç¼ºç‚¹ï¼šä¸ä¸¥è°¨ï¼Œå› ä¸ºè¯¥ç±»å‹çš„æ•°ç»„ä¸­å¯ä»¥å‡ºç°ä»»æ„å¤šä¸ªæ•°å­—
- æ›´å¥½çš„æ–¹å¼ï¼š`å…ƒç»„ Tuple`
- å…ƒç»„ç±»å‹æ˜¯å¦ä¸€ç§ç±»å‹çš„æ•°ç»„ï¼Œå®ƒç¡®åˆ‡åœ°çŸ¥é“åŒ…å«å¤šå°‘ä¸ªå…ƒç´ ï¼Œ**ä»¥åŠç‰¹å®šç´¢å¼•å¯¹åº”çš„ç±»å‹**ï¼ˆå…ƒç¥–ç”¨äºä¿å­˜å®šé•¿å®šæ•°æ®ç±»å‹çš„æ•°æ®ï¼‰

```ts
// ç±»å‹å¿…é¡»åŒ¹é…ä¸”ä¸ªæ•°å¿…é¡»ä¸º2
let position: [number, number] = [39.5427, 116.2317]
```

- è§£é‡Šï¼š
  1. å…ƒç»„ç±»å‹å¯ä»¥ç¡®åˆ‡åœ°æ ‡è®°å‡ºæœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œä»¥åŠæ¯ä¸ªå…ƒç´ çš„ç±»å‹
  2. è¯¥ç¤ºä¾‹ä¸­ï¼Œå…ƒç´ æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹éƒ½æ˜¯ number

**æ³¨æ„**ï¼Œå…ƒç»„ç±»å‹åªèƒ½è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œé•¿åº¦å·²æŒ‡å®šï¼Œè¶Šç•Œè®¿é—®ä¼šæç¤ºé”™è¯¯ã€‚å¦‚æœä¸€ä¸ªæ•°ç»„ä¸­å¯èƒ½æœ‰å¤šç§ç±»å‹ï¼Œæ•°é‡å’Œç±»å‹éƒ½ä¸ç¡®å®šï¼Œé‚£å°±ç›´æ¥`any[]`

### 3.10.2 å…ƒç¥–ç±»å‹çš„è§£æ„èµ‹å€¼

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼æ¥è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œå½“å…ƒç»„ä¸­çš„å…ƒç´ è¾ƒå¤šæ—¶ï¼Œè¿™ç§æ–¹å¼å¹¶ä¸æ˜¯é‚£ä¹ˆä¾¿æ·ã€‚å…¶å®å…ƒç»„ä¹Ÿæ˜¯æ”¯æŒè§£æ„èµ‹å€¼çš„ï¼š

```typescript
let employee: [number, string] = [1, "Semlinker"];
let [id, username] = employee;
console.log(`id: ${id}`);
console.log(`username: ${username}`);
```

ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹æ¶ˆæ¯ï¼š

```typescript
id: 1
username: Semlinker
```

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è§£æ„èµ‹å€¼æ—¶ï¼Œè§£æ„æ•°ç»„å…ƒç´ çš„ä¸ªæ•°æ˜¯ä¸èƒ½è¶…è¿‡å…ƒç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œå¦åˆ™ä¹Ÿä¼šå‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚ï¼š

```typescript
let employee: [number, string] = [1, "Semlinker"];
let [id, username, age] = employee;
```

åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª age å˜é‡ï¼Œä½†æ­¤æ—¶ TypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š

```typescript
Tuple type '[number, string]' of length '2' has no element at index '2'.
```

å¾ˆæ˜æ˜¾å…ƒç»„ç±»å‹ `[number, string]` çš„é•¿åº¦æ˜¯ `2`ï¼Œåœ¨ä½ç½®ç´¢å¼• `2` å¤„ä¸å­˜åœ¨ä»»ä½•å…ƒç´ ã€‚

### 3.10.3 å…ƒç»„ç±»å‹çš„å¯é€‰å…ƒç´ 

ä¸å‡½æ•°ç­¾åç±»å‹ï¼Œåœ¨å®šä¹‰å…ƒç»„ç±»å‹æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ `?` å·æ¥å£°æ˜å…ƒç»„ç±»å‹çš„å¯é€‰å…ƒç´ ï¼Œå…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

```typescript
let optionalTuple: [string, boolean?];
optionalTuple = ["Semlinker", true];
console.log(`optionalTuple : ${optionalTuple}`);
optionalTuple = ["Kakuqo"];
console.log(`optionalTuple : ${optionalTuple}`);
```

åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `optionalTuple` çš„å˜é‡ï¼Œè¯¥å˜é‡çš„ç±»å‹è¦æ±‚åŒ…å«ä¸€ä¸ªå¿…é¡»çš„å­—ç¬¦ä¸²å±æ€§å’Œä¸€ä¸ªå¯é€‰å¸ƒå°”å±æ€§ï¼Œè¯¥ä»£ç æ­£å¸¸è¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹å†…å®¹ï¼š

```js
optionalTuple : Semlinker,true
optionalTuple : Kakuqo
```

é‚£ä¹ˆåœ¨å®é™…å·¥ä½œä¸­ï¼Œå£°æ˜å¯é€‰çš„å…ƒç»„å…ƒç´ æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿè¿™é‡Œæˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œåœ¨ä¸‰ç»´åæ ‡è½´ä¸­ï¼Œä¸€ä¸ªåæ ‡ç‚¹å¯ä»¥ä½¿ç”¨ `(x, y, z)` çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œå¯¹äºäºŒç»´åæ ‡è½´æ¥è¯´ï¼Œåæ ‡ç‚¹å¯ä»¥ä½¿ç”¨ `(x, y)` çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œè€Œå¯¹äºä¸€ç»´åæ ‡è½´æ¥è¯´ï¼Œåªè¦ä½¿ç”¨ `(x)` çš„å½¢å¼æ¥è¡¨ç¤ºå³å¯ã€‚é’ˆå¯¹è¿™ç§æƒ…å½¢ï¼Œåœ¨ TypeScript ä¸­å°±å¯ä»¥åˆ©ç”¨å…ƒç»„ç±»å‹å¯é€‰å…ƒç´ çš„ç‰¹æ€§æ¥å®šä¹‰ä¸€ä¸ªå…ƒç»„ç±»å‹çš„åæ ‡ç‚¹ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š

```typescript
type Point = [number, number?, number?];

const x: Point = [10]; // ä¸€ç»´åæ ‡ç‚¹
const xy: Point = [10, 20]; // äºŒç»´åæ ‡ç‚¹
const xyz: Point = [10, 20, 10]; // ä¸‰ç»´åæ ‡ç‚¹

console.log(x.length); // 1
console.log(xy.length); // 2
console.log(xyz.length); // 3
```

### 3.10.4 å…ƒç»„ç±»å‹çš„å‰©ä½™å…ƒç´ 

å…ƒç»„ç±»å‹é‡Œæœ€åä¸€ä¸ªå…ƒç´ å¯ä»¥æ˜¯å‰©ä½™å…ƒç´ ï¼Œå½¢å¼ä¸º `...X`ï¼Œè¿™é‡Œ `X` æ˜¯æ•°ç»„ç±»å‹ã€‚**å‰©ä½™å…ƒç´ ä»£è¡¨å…ƒç»„ç±»å‹æ˜¯å¼€æ”¾çš„ï¼Œå¯ä»¥æœ‰é›¶ä¸ªæˆ–å¤šä¸ªé¢å¤–çš„å…ƒç´ ã€‚** ä¾‹å¦‚ï¼Œ`[number, ...string[]]` è¡¨ç¤ºå¸¦æœ‰ä¸€ä¸ª `number` å…ƒç´ å’Œä»»æ„æ•°é‡`string` ç±»å‹å…ƒç´ çš„å…ƒç»„ç±»å‹ã€‚ä¸ºäº†èƒ½æ›´å¥½çš„ç†è§£ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼š

```js
type RestTupleType = [number, ...string[]];
let restTuple: RestTupleType = [666, "Semlinker", "Kakuqo", "Lolo"];
console.log(restTuple[0]);
console.log(restTuple[1]);
```

### 3.10.5 åªè¯»çš„å…ƒç»„ç±»å‹

TypeScript 3.4 è¿˜å¼•å…¥äº†å¯¹åªè¯»å…ƒç»„çš„æ–°æ”¯æŒã€‚æˆ‘ä»¬å¯ä»¥ä¸ºä»»ä½•å…ƒç»„ç±»å‹åŠ ä¸Š `readonly` å…³é”®å­—å‰ç¼€ï¼Œä»¥ä½¿å…¶æˆä¸ºåªè¯»å…ƒç»„ã€‚å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
const point: readonly [number, number] = [10, 20];
```

åœ¨ä½¿ç”¨ `readonly` å…³é”®å­—ä¿®é¥°å…ƒç»„ç±»å‹ä¹‹åï¼Œä»»ä½•ä¼å›¾ä¿®æ”¹å…ƒç»„ä¸­å…ƒç´ çš„æ“ä½œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š

```js
// Cannot assign to '0' because it is a read-only property.
point[0] = 1;
// Property 'push' does not exist on type 'readonly [number, number]'.
point.push(0);
// Property 'pop' does not exist on type 'readonly [number, number]'.
point.pop();
// Property 'splice' does not exist on type 'readonly [number, number]'.
point.splice(1, 1);
```


##  3.11 å­—é¢é‡ç±»å‹

åœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚

### 3.11.1 åŸºæœ¬ä½¿ç”¨

- æ€è€ƒä»¥ä¸‹ä»£ç ï¼Œä¸¤ä¸ªå˜é‡çš„ç±»å‹åˆ†åˆ«æ˜¯ä»€ä¹ˆ?

```ts
let str1 = 'Hello TS'
const str2 = 'Hello TS'
```

- é€šè¿‡ TS ç±»å‹æ¨æ–­æœºåˆ¶ï¼Œå¯ä»¥å¾—åˆ°ç­”æ¡ˆï¼š
  1. å˜é‡ str1 çš„ç±»å‹ä¸ºï¼šstring
  2. å˜é‡ str2 çš„ç±»å‹ä¸ºï¼š'Hello TS'
- è§£é‡Š:

1. str1 æ˜¯ä¸€ä¸ªå˜é‡(let)ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç±»å‹ä¸º:string
2. str2 æ˜¯ä¸€ä¸ªå¸¸é‡(const)ï¼Œå®ƒçš„å€¼ä¸èƒ½å˜åŒ–åªèƒ½æ˜¯ 'Hello TS'ï¼Œæ‰€ä»¥ï¼Œå®ƒçš„ç±»å‹ä¸º:'Hello TS'

- æ³¨æ„ï¼šæ­¤å¤„çš„ 'Hello TS'ï¼Œå°±æ˜¯ä¸€ä¸ª**å­—é¢é‡ç±»å‹**ï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½œä¸º TS ä¸­çš„ç±»å‹

ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```typescript
{
  let specifiedStr: 'this is string' = 'this is string';
  let specifiedNum: 1 = 1;
  let specifiedBoolean: true = true;
}
```

æ¯”å¦‚ 'this is string' ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ç±»å‹æ˜¯ string ç±»å‹ï¼ˆç¡®åˆ‡åœ°è¯´æ˜¯ string ç±»å‹çš„å­ç±»å‹ï¼‰ï¼Œè€Œ string ç±»å‹ä¸ä¸€å®šæ˜¯ 'this is string'ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ç±»å‹ï¼Œå¦‚ä¸‹å…·ä½“ç¤ºä¾‹ï¼š

```typescript
{
  let specifiedStr: 'this is string' = 'this is string';
  let str: string = 'any string';
  specifiedStr = str; // ts(2322) ç±»å‹ '"string"' ä¸èƒ½èµ‹å€¼ç»™ç±»å‹ 'this is string'
  str = specifiedStr; // ok 
}
```

'this is string' å­—é¢é‡ç±»å‹å¯ä»¥ç»™ string ç±»å‹èµ‹å€¼ï¼Œä½†æ˜¯ string ç±»å‹ä¸èƒ½ç»™ 'this is string' å­—é¢é‡ç±»å‹èµ‹å€¼ã€‚

### 3.11.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ä½œä¸ºå˜é‡çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
let hello: 'hello' = 'hello';
hello = 'hi'; // ts(2322) Type '"hi"' is not assignable to type '"hello"'
```

å®é™…ä¸Šï¼Œå®šä¹‰å•ä¸ªçš„å­—é¢é‡ç±»å‹å¹¶æ²¡æœ‰å¤ªå¤§çš„ç”¨å¤„ï¼Œå®ƒçœŸæ­£çš„åº”ç”¨åœºæ™¯æ˜¯å¯ä»¥æŠŠå¤šä¸ªå­—é¢é‡ç±»å‹ç»„åˆæˆä¸€ä¸ªè”åˆç±»å‹ï¼ˆåé¢ä¼šè®²è§£ï¼‰ï¼Œç”¨æ¥æè¿°æ‹¥æœ‰æ˜ç¡®æˆå‘˜çš„å®ç”¨çš„é›†åˆã€‚

å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢é‡è”åˆç±»å‹æè¿°äº†ä¸€ä¸ªæ˜ç¡®ã€å¯ 'up' å¯ 'down' çš„é›†åˆï¼Œè¿™æ ·å°±èƒ½æ¸…æ¥šåœ°çŸ¥é“éœ€è¦çš„æ•°æ®ç»“æ„äº†ã€‚

```js
type Direction = 'up' | 'down';

function move(dir: Direction) {
  // ...
}
move('up'); // ok
move('right'); // ts(2345) Argument of type '"right"' is not assignable to parameter of type 'Direction'
```

é€šè¿‡ä½¿ç”¨å­—é¢é‡ç±»å‹ç»„åˆçš„è”åˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶å‡½æ•°çš„å‚æ•°ä¸ºæŒ‡å®šçš„å­—é¢é‡ç±»å‹é›†åˆï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯æŒ‡å®šçš„å­—é¢é‡ç±»å‹é›†åˆé‡Œçš„æˆå‘˜ã€‚

å› æ­¤ï¼Œç›¸è¾ƒäºä½¿ç”¨ string ç±»å‹ï¼Œä½¿ç”¨å­—é¢é‡ç±»å‹ï¼ˆç»„åˆçš„è”åˆç±»å‹ï¼‰å¯ä»¥å°†å‡½æ•°çš„å‚æ•°é™å®šä¸ºæ›´å…·ä½“çš„ç±»å‹ã€‚è¿™ä¸ä»…æå‡äº†ç¨‹åºçš„å¯è¯»æ€§ï¼Œè¿˜ä¿è¯äº†å‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œå¯è°“ä¸€ä¸¾ä¸¤å¾—ã€‚

### 3.11.3 æ•°å­—å­—é¢é‡ç±»å‹åŠå¸ƒå°”å­—é¢é‡ç±»å‹

æ•°å­—å­—é¢é‡ç±»å‹å’Œå¸ƒå°”å­—é¢é‡ç±»å‹çš„ä½¿ç”¨ä¸å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çš„ä½¿ç”¨ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—é¢é‡ç»„åˆçš„è”åˆç±»å‹å°†å‡½æ•°çš„å‚æ•°é™å®šä¸ºæ›´å…·ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚å£°æ˜å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªç±»å‹ Configï¼š

```ts
interface Config {
    size: 'small' | 'big';
    isEnable:  true | false;
    margin: 0 | 2 | 4;
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é™å®šäº† size å±æ€§ä¸ºå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ 'small' | 'big'ï¼ŒisEnable å±æ€§ä¸ºå¸ƒå°”å­—é¢é‡ç±»å‹ true | falseï¼ˆå¸ƒå°”å­—é¢é‡åªåŒ…å« true å’Œ falseï¼Œtrue | false çš„ç»„åˆè·Ÿç›´æ¥ä½¿ç”¨ boolean æ²¡æœ‰åŒºåˆ«ï¼‰ï¼Œmargin å±æ€§ä¸ºæ•°å­—å­—é¢é‡ç±»å‹ 0 | 2 | 4ã€‚

### 3.11.4 letå’Œconståˆ†æ

æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ª const ç¤ºä¾‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
{
  const str = 'this is string'; // str: 'this is string'
  const num = 1; // num: 1
  const bool = true; // bool: true
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°† const å®šä¹‰ä¸ºä¸€ä¸ªä¸å¯å˜æ›´çš„å¸¸é‡ï¼Œåœ¨ç¼ºçœç±»å‹æ³¨è§£çš„æƒ…å†µä¸‹ï¼ŒTypeScript æ¨æ–­å‡ºå®ƒçš„ç±»å‹ç›´æ¥ç”±èµ‹å€¼å­—é¢é‡çš„ç±»å‹å†³å®šï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒåˆç†çš„è®¾è®¡ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä¸‹æ‰€ç¤ºçš„ let ç¤ºä¾‹:

```js
{

  let str = 'this is string'; // str: string
  let num = 1; // num: number
  let bool = true; // bool: boolean
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œç¼ºçœæ˜¾å¼ç±»å‹æ³¨è§£çš„å¯å˜æ›´çš„å˜é‡çš„ç±»å‹è½¬æ¢ä¸ºäº†èµ‹å€¼å­—é¢é‡ç±»å‹çš„çˆ¶ç±»å‹ï¼Œæ¯”å¦‚ str çš„ç±»å‹æ˜¯ 'this is string' ç±»å‹ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰çš„çˆ¶ç±»å‹ stringï¼Œnum çš„ç±»å‹æ˜¯ 1 ç±»å‹çš„çˆ¶ç±»å‹ numberã€‚

è¿™ç§è®¾è®¡ç¬¦åˆç¼–ç¨‹é¢„æœŸï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ†åˆ«èµ‹äºˆ str å’Œ num ä»»æ„å€¼ï¼ˆåªè¦ç±»å‹æ˜¯ string å’Œ number çš„å­é›†çš„å˜é‡ï¼‰ï¼š

```js
  str = 'any string';
  num = 2;
  bool = false;
```

æˆ‘ä»¬å°† TypeScript çš„å­—é¢é‡å­ç±»å‹è½¬æ¢ä¸ºçˆ¶ç±»å‹çš„è¿™ç§è®¾è®¡ç§°ä¹‹ä¸º "literal widening"ï¼Œä¹Ÿå°±æ˜¯å­—é¢é‡ç±»å‹çš„æ‹“å®½ï¼Œæ¯”å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­æåˆ°çš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è½¬æ¢æˆ string ç±»å‹ï¼Œä¸‹é¢æˆ‘ä»¬ç€é‡ä»‹ç»ä¸€ä¸‹ã€‚

### 3.11.5 ä½¿ç”¨æ¨¡å¼å’Œåœºæ™¯

- ä½¿ç”¨æ¨¡å¼ï¼š**å­—é¢é‡ç±»å‹é…åˆè”åˆç±»å‹ä¸€èµ·ä½¿ç”¨**
- ä½¿ç”¨åœºæ™¯ï¼šç”¨æ¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼åˆ—è¡¨
- æ¯”å¦‚ï¼Œåœ¨è´ªåƒè›‡æ¸¸æˆä¸­ï¼Œæ¸¸æˆçš„æ–¹å‘çš„å¯é€‰å€¼åªèƒ½æ˜¯ä¸Šã€ä¸‹ã€å·¦ã€å³ä¸­çš„ä»»æ„ä¸€ä¸ª

```ts
// ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹:
type Direction = 'up' | 'down' | 'left' | 'right'

function changeDirection(direction: Direction) {
  console.log(direction)
}

// è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šæœ‰ç±»å‹æç¤ºï¼š
changeDirection('up')
```

- è§£é‡Šï¼šå‚æ•° direction çš„å€¼åªèƒ½æ˜¯ up/down/left/right ä¸­çš„ä»»æ„ä¸€ä¸ª
- ä¼˜åŠ¿ï¼šç›¸æ¯”äº string ç±»å‹ï¼Œä½¿ç”¨å­—é¢é‡ç±»å‹æ›´åŠ ç²¾ç¡®ã€ä¸¥è°¨

### 3.11.6 ç±»å‹æ‹“å®½(Type Widening)

æ‰€æœ‰é€šè¿‡ let æˆ– var å®šä¹‰çš„å˜é‡ã€å‡½æ•°çš„å½¢å‚ã€å¯¹è±¡çš„éåªè¯»å±æ€§ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šäº†åˆå§‹å€¼ä¸”æœªæ˜¾å¼æ·»åŠ ç±»å‹æ³¨è§£çš„æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒä»¬æ¨æ–­å‡ºæ¥çš„ç±»å‹å°±æ˜¯æŒ‡å®šçš„åˆå§‹å€¼å­—é¢é‡ç±»å‹æ‹“å®½åçš„ç±»å‹ï¼Œè¿™å°±æ˜¯å­—é¢é‡ç±»å‹æ‹“å®½ã€‚

ä¸‹é¢æˆ‘ä»¬é€šè¿‡å­—ç¬¦ä¸²å­—é¢é‡çš„ç¤ºä¾‹æ¥ç†è§£ä¸€ä¸‹å­—é¢é‡ç±»å‹æ‹“å®½ï¼š

```js
  let str = 'this is string'; // ç±»å‹æ˜¯ string
  let strFun = (str = 'this is string') => str; // ç±»å‹æ˜¯ (str?: string) => string;
  const specifiedStr = 'this is string'; // ç±»å‹æ˜¯ 'this is string'
  let str2 = specifiedStr; // ç±»å‹æ˜¯ 'string'
  let strFun2 = (str = specifiedStr) => str; // ç±»å‹æ˜¯ (str?: string) => string;
```

å› ä¸ºç¬¬ 1~2 è¡Œæ»¡è¶³äº† letã€å½¢å‚ä¸”æœªæ˜¾å¼å£°æ˜ç±»å‹æ³¨è§£çš„æ¡ä»¶ï¼Œæ‰€ä»¥å˜é‡ã€å½¢å‚çš„ç±»å‹æ‹“å®½ä¸º stringï¼ˆå½¢å‚ç±»å‹ç¡®åˆ‡åœ°è®²æ˜¯ string | undefinedï¼‰ã€‚

å› ä¸ºç¬¬ 3 è¡Œçš„å¸¸é‡ä¸å¯å˜æ›´ï¼Œç±»å‹æ²¡æœ‰æ‹“å®½ï¼Œæ‰€ä»¥ specifiedStr çš„ç±»å‹æ˜¯ 'this is string' å­—é¢é‡ç±»å‹ã€‚

ç¬¬ 4~5 è¡Œï¼Œå› ä¸ºèµ‹äºˆçš„å€¼ specifiedStr çš„ç±»å‹æ˜¯å­—é¢é‡ç±»å‹ï¼Œä¸”æ²¡æœ‰æ˜¾å¼ç±»å‹æ³¨è§£ï¼Œæ‰€ä»¥å˜é‡ã€å½¢å‚çš„ç±»å‹ä¹Ÿè¢«æ‹“å®½äº†ã€‚å…¶å®ï¼Œè¿™æ ·çš„è®¾è®¡ç¬¦åˆå®é™…ç¼–ç¨‹è¯‰æ±‚ã€‚æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ str2 çš„ç±»å‹è¢«æ¨æ–­ä¸º 'this is string'ï¼Œå®ƒå°†ä¸å¯å˜æ›´ï¼Œå› ä¸ºèµ‹äºˆä»»ä½•å…¶ä»–çš„å­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½ä¼šæç¤ºç±»å‹é”™è¯¯ã€‚

åŸºäºå­—é¢é‡ç±»å‹æ‹“å®½çš„æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºä»£ç æ·»åŠ æ˜¾ç¤ºç±»å‹æ³¨è§£æ§åˆ¶ç±»å‹æ‹“å®½è¡Œä¸ºã€‚

```js
{
  const specifiedStr: 'this is string' = 'this is string'; // ç±»å‹æ˜¯ '"this is string"'
  let str2 = specifiedStr; // å³ä¾¿ä½¿ç”¨ let å®šä¹‰ï¼Œç±»å‹æ˜¯ 'this is string'
}
```

å®é™…ä¸Šï¼Œé™¤äº†å­—é¢é‡ç±»å‹æ‹“å®½ä¹‹å¤–ï¼ŒTypeScript å¯¹æŸäº›ç‰¹å®šç±»å‹å€¼ä¹Ÿæœ‰ç±»ä¼¼ "Type Widening" ï¼ˆç±»å‹æ‹“å®½ï¼‰çš„è®¾è®¡ï¼Œä¸‹é¢æˆ‘ä»¬å…·ä½“æ¥äº†è§£ä¸€ä¸‹ã€‚

æ¯”å¦‚å¯¹ null å’Œ undefined çš„ç±»å‹è¿›è¡Œæ‹“å®½ï¼Œé€šè¿‡ letã€var å®šä¹‰çš„å˜é‡å¦‚æœæ»¡è¶³æœªæ˜¾å¼å£°æ˜ç±»å‹æ³¨è§£ä¸”è¢«èµ‹äºˆäº† null æˆ– undefined å€¼ï¼Œåˆ™æ¨æ–­å‡ºè¿™äº›å˜é‡çš„ç±»å‹æ˜¯ anyï¼š

```js
{
  let x = null; // ç±»å‹æ‹“å®½æˆ any
  let y = undefined; // ç±»å‹æ‹“å®½æˆ any

  /** -----åˆ†ç•Œçº¿------- */
  const z = null; // ç±»å‹æ˜¯ null

  /** -----åˆ†ç•Œçº¿------- */
  let anyFun = (param = null) => param; // å½¢å‚ç±»å‹æ˜¯ null
  let z2 = z; // ç±»å‹æ˜¯ null
  let x2 = x; // ç±»å‹æ˜¯ null
  let y2 = y; // ç±»å‹æ˜¯ undefined
}
```

**æ³¨æ„ï¼šåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸€äº›æ¯”è¾ƒè€çš„ç‰ˆæœ¬ä¸­ï¼ˆ2.0ï¼‰null å’Œ undefined å¹¶ä¸ä¼šè¢«æ‹“å®½æˆâ€œanyâ€ã€‚**

### 3.11.7 ç±»å‹ç¼©å°(Type Narrowing)

åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸäº›æ“ä½œå°†å˜é‡çš„ç±»å‹ç”±ä¸€ä¸ªè¾ƒä¸ºå®½æ³›çš„é›†åˆç¼©å°åˆ°ç›¸å¯¹è¾ƒå°ã€è¾ƒæ˜ç¡®çš„é›†åˆï¼Œè¿™å°±æ˜¯ "Type Narrowing"ã€‚

æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«å°†å‡½æ•°å‚æ•°çš„ç±»å‹ä» any ç¼©å°åˆ°æ˜ç¡®çš„ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
{
  let func = (anything: any) => {
    if (typeof anything === 'string') {
      return anything; // ç±»å‹æ˜¯ string 
    } else if (typeof anything === 'number') {
      return anything; // ç±»å‹æ˜¯ number
    }
    return null;
  };
}
```

åœ¨ VS Code ä¸­ hover åˆ°ç¬¬ 4 è¡Œçš„ anything å˜é‡æç¤ºç±»å‹æ˜¯ stringï¼Œåˆ°ç¬¬ 6 è¡Œåˆ™æç¤ºç±»å‹æ˜¯ numberã€‚

åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«å°†è”åˆç±»å‹ç¼©å°åˆ°æ˜ç¡®çš„å­ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
{
  let func = (anything: string | number) => {
    if (typeof anything === 'string') {
      return anything; // ç±»å‹æ˜¯ string 
    } else {
      return anything; // ç±»å‹æ˜¯ number
    }
  };
}
```

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å­—é¢é‡ç±»å‹ç­‰å€¼åˆ¤æ–­ï¼ˆ===ï¼‰æˆ–å…¶ä»–æ§åˆ¶æµè¯­å¥ï¼ˆåŒ…æ‹¬ä½†ä¸é™äº ifã€ä¸‰ç›®è¿ç®—ç¬¦ã€switch åˆ†æ”¯ï¼‰å°†è”åˆç±»å‹æ”¶æ•›ä¸ºæ›´å…·ä½“çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
{
  type Goods = 'pen' | 'pencil' |'ruler';
  const getPenCost = (item: 'pen') => 2;
  const getPencilCost = (item: 'pencil') => 4;
  const getRulerCost = (item: 'ruler') => 6;
  const getCost = (item: Goods) =>  {
    if (item === 'pen') {
      return getPenCost(item); // item => 'pen'
    } else if (item === 'pencil') {
      return getPencilCost(item); // item => 'pencil'
    } else {
      return getRulerCost(item); // item => 'ruler'
    }
  }
}
```

åœ¨ä¸Šè¿° getCost å‡½æ•°ä¸­ï¼Œæ¥å—çš„å‚æ•°ç±»å‹æ˜¯å­—é¢é‡ç±»å‹çš„è”åˆç±»å‹ï¼Œå‡½æ•°å†…åŒ…å«äº† `if` è¯­å¥çš„ 3 ä¸ªæµç¨‹åˆ†æ”¯ï¼Œå…¶ä¸­æ¯ä¸ªæµç¨‹åˆ†æ”¯è°ƒç”¨çš„å‡½æ•°çš„å‚æ•°éƒ½æ˜¯å…·ä½“ç‹¬ç«‹çš„å­—é¢é‡ç±»å‹ã€‚

é‚£ä¸ºä»€ä¹ˆç±»å‹ç”±å¤šä¸ªå­—é¢é‡ç»„æˆçš„å˜é‡ item å¯ä»¥ä¼ å€¼ç»™ä»…æ¥æ”¶å•ä¸€ç‰¹å®šå­—é¢é‡ç±»å‹çš„å‡½æ•° `getPenCostã€getPencilCostã€getRulerCost` å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨æ¯ä¸ªæµç¨‹åˆ†æ”¯ä¸­ï¼Œç¼–è¯‘å™¨çŸ¥é“æµç¨‹åˆ†æ”¯ä¸­çš„ item ç±»å‹æ˜¯ä»€ä¹ˆã€‚æ¯”å¦‚ item === 'pencil' çš„åˆ†æ”¯ï¼Œitem çš„ç±»å‹å°±è¢«æ”¶ç¼©ä¸ºâ€œpencilâ€ã€‚

äº‹å®ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸Šé¢çš„ç¤ºä¾‹å»æ‰ä¸­é—´çš„æµç¨‹åˆ†æ”¯ï¼Œç¼–è¯‘å™¨ä¹Ÿå¯ä»¥æ¨æ–­å‡ºæ”¶æ•›åçš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
  const getCost = (item: Goods) =>  {
    if (item === 'pen') {
      item; // item => 'pen'
    } else {
      item; // => 'pencil' | 'ruler'
    }
  }
```

## 3.12 æšä¸¾ç±»å‹

### 3.12.1 åŸºæœ¬ä½¿ç”¨

- æšä¸¾çš„åŠŸèƒ½ç±»ä¼¼äº**å­—é¢é‡ç±»å‹+è”åˆç±»å‹ç»„åˆ**çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼
- æšä¸¾ï¼šå®šä¹‰ä¸€ç»„å‘½åå¸¸é‡ã€‚å®ƒæè¿°ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼å¯ä»¥æ˜¯è¿™äº›å‘½åå¸¸é‡ä¸­çš„ä¸€ä¸ª

```ts
// åˆ›å»ºæšä¸¾
enum æšä¸¾å { 
    æšä¸¾é¡¹ = æšä¸¾å€¼,
    æšä¸¾é¡¹ = æšä¸¾å€¼, 
}
```

- è§£é‡Š:
  1. ä½¿ç”¨ `enum` å…³é”®å­—å®šä¹‰æšä¸¾
  2. çº¦å®šæšä¸¾åç§°ä»¥å¤§å†™å­—æ¯å¼€å¤´
  3. æšä¸¾ä¸­çš„å¤šä¸ªå€¼ä¹‹é—´é€šè¿‡ `,`ï¼ˆé€—å·ï¼‰åˆ†éš”
  4. å®šä¹‰å¥½æšä¸¾åï¼Œç›´æ¥ä½¿ç”¨æšä¸¾åç§°ä½œä¸ºç±»å‹æ³¨è§£

### 3.12.2 æ•°å­—æšä¸¾

- é—®é¢˜ï¼šæˆ‘ä»¬æŠŠæšä¸¾æˆå‘˜ä½œä¸ºäº†å‡½æ•°çš„å®å‚ï¼Œå®ƒçš„å€¼æ˜¯ä»€ä¹ˆå‘¢?
- è§£é‡Šï¼šé€šè¿‡å°†é¼ æ ‡ç§»å…¥ Gender.Boyï¼Œå¯ä»¥çœ‹åˆ°æšä¸¾æˆå‘˜ Boy çš„å€¼ä¸º 1
- æ³¨æ„ï¼šæšä¸¾æˆå‘˜æ˜¯æœ‰å€¼çš„ï¼Œé»˜è®¤ä¸ºï¼šä» 0 å¼€å§‹è‡ªå¢çš„æ•°å€¼
- æˆ‘ä»¬æŠŠï¼Œæšä¸¾æˆå‘˜çš„å€¼ä¸ºæ•°å­—çš„æšä¸¾ï¼Œç§°ä¸ºï¼š`æ•°å­—æšä¸¾`
- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç»™æšä¸¾ä¸­çš„æˆå‘˜åˆå§‹åŒ–å€¼

```ts
{
  /* 
    âœ…å¼€å‘éœ€æ±‚ï¼š
      ç”¨æˆ·ç¼–è¾‘ç•Œé¢ï¼Œç”¨æˆ·é€‰æ‹©çš„æ€§åˆ«    ç”·  å¥³  æœªçŸ¥
      åç«¯æ¥å£å‚æ•°è¦æ±‚ä¼ çš„æ˜¯æ•°å­—å¯¹åº”ä¸º 1   0  -1

    ğŸ‰å¼€å‘ç»éªŒï¼š
      TSé¡¹ç›®ä¸­å¯é€šè¿‡è®¾è®¡æšä¸¾ç»“æ„ï¼Œæé«˜æºä»£ç çš„å¯è¯»æ€§
  */

  // å®šä¹‰æšä¸¾ç»“æ„
  // enum Gender {
  //   Boy = 1,
  //   Girl = 0,
  //   Unknown = -1
  // }

  // ğŸ””è¡¥å……ï¼šæšä¸¾é¡¹ä¼šè‡ªåŠ¨è‡ªå¢ï¼Œé»˜è®¤ä» 0 å¼€å§‹
  enum Gender {
    Unknown = -1,
    Girl,
    Boy,
  }

  // æ¨¡æ‹Ÿåç«¯æ‰€éœ€çš„å‚æ•°
  const query: Gender = {
    name: 'ç”¨æˆ·å',
    // gender: Gender.Boy ç­‰ä»·äº gender: 1ï¼ŒğŸ””ä½†ä»£ç å¯è¯»æ€§æ›´é«˜
    gender: Gender.Boy,
  }

  console.log('query', query)
```

### 3.12.3 å­—ç¬¦ä¸²æšä¸¾-äº†è§£å³å¯

- å­—ç¬¦ä¸²æšä¸¾ï¼šæšä¸¾æˆå‘˜çš„å€¼æ˜¯å­—ç¬¦ä¸²
- æ³¨æ„ï¼šå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿è¡Œä¸ºï¼Œå› æ­¤ï¼Œ**å­—ç¬¦ä¸²æšä¸¾çš„æ¯ä¸ªæˆå‘˜å¿…é¡»æœ‰åˆå§‹å€¼**

```ts
enum Direction {
  Up = 'UP',
  Down = 'DOWN',
  Left = 'LEFT',
  Right = 'RIGHT'
}
```

### 3.12.4 æšä¸¾å®ç°åŸç†

- æšä¸¾æ˜¯ TS ä¸ºæ•°ä¸å¤šçš„é JavaScript ç±»å‹çº§æ‰©å±•(ä¸ä»…ä»…æ˜¯ç±»å‹)çš„ç‰¹æ€§ä¹‹ä¸€
- å› ä¸ºï¼šå…¶ä»–ç±»å‹ä»…ä»…è¢«å½“åšç±»å‹ï¼Œè€Œæšä¸¾ä¸ä»…ç”¨ä½œç±»å‹ï¼Œè¿˜æä¾›å€¼(æšä¸¾æˆå‘˜éƒ½æ˜¯æœ‰å€¼çš„)
- ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»–çš„ç±»å‹ä¼šåœ¨ç¼–è¯‘ä¸º JS ä»£ç æ—¶è‡ªåŠ¨ç§»é™¤ã€‚ä½†æ˜¯ï¼Œ**æšä¸¾ç±»å‹ä¼šè¢«ç¼–è¯‘ä¸º JS ä»£ç **

```ts
enum Gender {
    Unknown = -1,
    Girl = 0,
    Boy = 1,
}

// ä¼šè¢«ç¼–è¯‘ä¸ºä»¥ä¸‹ JS ä»£ç ï¼š
var Gender;
(function (Gender) {
    Gender[Gender["Unknown"] = -1] = "Unknown";
    Gender[Gender["Girl"] = 0] = "Girl";
    Gender[Gender["Boy"] = 1] = "Boy";
})(Gender || (Gender = {}));
```

- è¯´æ˜ï¼šæšä¸¾ä¸å‰é¢è®²åˆ°çš„å­—é¢é‡ç±»å‹+è”åˆç±»å‹ç»„åˆçš„åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ½ç”¨æ¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼åˆ—è¡¨
- ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ**æ¨èä½¿ç”¨å­—é¢é‡ç±»å‹+è”åˆç±»å‹ç»„åˆçš„æ–¹å¼**ï¼Œå› ä¸ºç›¸æ¯”æšä¸¾ï¼Œè¿™ç§æ–¹å¼æ›´åŠ ç›´è§‚ã€ç®€æ´ã€é«˜æ•ˆ

## 3.13 any ç±»å‹

åœ¨ TypeScript ä¸­ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º any ç±»å‹ã€‚è¿™è®© any ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„é¡¶çº§ç±»å‹.

- **åŸåˆ™:ä¸æ¨èä½¿ç”¨ any**!è¿™ä¼šè®© TypeScript å˜ä¸º â€œAnyScriptâ€(å¤±å» TS ç±»å‹ä¿æŠ¤çš„ä¼˜åŠ¿)
- ä¸€ä¸ªå˜é‡è®¾ç½®ç±»å‹ä¸ºanyåç›¸å½“äºå¯¹è¯¥å˜é‡å…³é—­äº†TSçš„ç±»å‹æ£€æµ‹
- å½“å€¼çš„ç±»å‹ä¸º any æ—¶ï¼Œå¯ä»¥å¯¹è¯¥å€¼è¿›è¡Œä»»æ„æ“ä½œï¼Œå¹¶ä¸”ä¸ä¼šæœ‰ä»£ç æç¤º

```ts
let a: any = 666;
a = "Semlinker";
a = false;
a = 66
a = undefined
a = null
a = []
a = {}

let a: string = 'seven';
a = 7;
// TS2322: Type 'number' is not assignable to type 'string'.
```

- è§£é‡Š:ä»¥ä¸Šæ“ä½œéƒ½ä¸ä¼šæœ‰ä»»ä½•ç±»å‹é”™è¯¯æç¤ºï¼Œå³ä½¿å¯èƒ½å­˜åœ¨é”™è¯¯
- å°½å¯èƒ½çš„é¿å…ä½¿ç”¨ any ç±»å‹ï¼Œé™¤éä¸´æ—¶ä½¿ç”¨ any æ¥â€œé¿å…â€ä¹¦å†™å¾ˆé•¿ã€å¾ˆå¤æ‚çš„ç±»å‹
- å…¶ä»–éšå¼å…·æœ‰ any ç±»å‹çš„æƒ…å†µ
  1. å£°æ˜å˜é‡ä¸æä¾›ç±»å‹ä¹Ÿä¸æä¾›é»˜è®¤å€¼
     ```typescript
     let something;
     something = 'seven';
     something = 7;
     something.setName('Tom');
     ```
  
     ç­‰ä»·äº
  
     ```typescript
     let something: any;
     something = 'seven';
     something = 7;
     something.setName('Tom');
     ```
  2. å‡½æ•°å‚æ•°ä¸åŠ ç±»å‹
- æ³¨æ„ï¼šå› ä¸ºä¸æ¨èä½¿ç”¨ anyï¼Œæ‰€ä»¥ï¼Œè¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½åº”è¯¥æä¾›ç±»å‹

åœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œè¿™å¤ªå®½æ¾äº†ã€‚ä½¿ç”¨ `any` ç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ç±»å‹æ­£ç¡®ä½†åœ¨è¿è¡Œæ—¶æœ‰é—®é¢˜çš„ä»£ç ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ `any` ç±»å‹ï¼Œå°±æ— æ³•ä½¿ç”¨ TypeScript æä¾›çš„å¤§é‡çš„ä¿æŠ¤æœºåˆ¶ã€‚è¯·è®°ä½ï¼Œ`any æ˜¯é­”é¬¼ï¼`å°½é‡ä¸è¦ç”¨anyã€‚

ä¸ºäº†è§£å†³ `any` å¸¦æ¥çš„é—®é¢˜ï¼ŒTypeScript 3.0 å¼•å…¥äº† `unknown` ç±»å‹ã€‚

## 3.14 unknown ç±»å‹

### 3.14.1 åŸºæœ¬ä½¿ç”¨

`unknown`ä¸`any`ä¸€æ ·ï¼Œæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥åˆ†é…ç»™`unknown`:

```typescript
// unknown è¡¨ç¤ºæœªçŸ¥ç±»å‹çš„å€¼
let e: unknown;
e = 10;
e = 'hello';
```

`unknown`ä¸`any`çš„æœ€å¤§åŒºåˆ«æ˜¯ï¼š ä»»ä½•ç±»å‹çš„å€¼å¯ä»¥èµ‹å€¼ç»™`any`ï¼ŒåŒæ—¶`any`ç±»å‹çš„å€¼ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚`unknown` ä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥èµ‹å€¼ç»™å®ƒï¼Œä½†å®ƒåªèƒ½èµ‹å€¼ç»™`unknown`å’Œ`any`ã€‚çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­:

```typescript
let notSure: unknown = 4;
let uncertain: any = notSure; // OK

let notSure: any = 4;
let uncertain: unknown = notSure; // OK

let notSure: unknown = 4;
let uncertain: number = notSure; // Error
```

> unknown å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„any
>
> unknownç±»å‹çš„å˜é‡ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼ˆé™¤äº†è‡ªå·±å’Œanyï¼‰

 å¦‚æœä¸ç¼©å°ç±»å‹ï¼Œå°±æ— æ³•å¯¹`unknown`ç±»å‹æ‰§è¡Œä»»ä½•æ“ä½œï¼š

```typescript
function getDog() {
 return '123'
}
 
const dog: unknown = {hello: getDog};
dog.hello(); // Error
```

è¿™ç§æœºåˆ¶èµ·åˆ°äº†å¾ˆå¼ºçš„é¢„é˜²æ€§ï¼Œæ›´å®‰å…¨ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬å¿…é¡»ç¼©å°ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`typeof`ã€`ç±»å‹æ–­è¨€`ç­‰æ–¹å¼æ¥ç¼©å°æœªçŸ¥èŒƒå›´ï¼š

```typescript
function getDogName() {
 let x: unknown;
 return x;
};
const dogName = getDogName();
// ç›´æ¥ä½¿ç”¨
const upName = dogName.toLowerCase(); // Error
// typeof
if (typeof dogName === 'string') {
  const upName = dogName.toLowerCase(); // OK
}
```

ä½†æ˜¯è¿™æ ·æ‰èƒ½èµ‹å€¼å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥å¼•å‡ºäº†ç±»å‹æ–­è¨€ã€‚

### 3.14.2 ç±»å‹æ–­è¨€

æœ‰äº›æƒ…å†µä¸‹ï¼Œå˜é‡çš„ç±»å‹å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯TSç¼–è¯‘å™¨å´å¹¶ä¸æ¸…æ¥šï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€æ¥å‘Šè¯‰ç¼–è¯‘å™¨å˜é‡çš„ç±»å‹ã€‚ 

ç±»å‹æ–­è¨€å¥½æ¯”å…¶ä»–è¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚

TypeScript ç±»å‹æ£€æµ‹æ— æ³•åšåˆ°ç»å¯¹æ™ºèƒ½ï¼Œæ¯•ç«Ÿç¨‹åºä¸èƒ½åƒäººä¸€æ ·æ€è€ƒã€‚æœ‰æ—¶ä¼šç¢°åˆ°æˆ‘ä»¬æ¯” TypeScript æ›´æ¸…æ¥šå®é™…ç±»å‹çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š

```ts
const arrayNumber: number[] = [1, 2, 3, 4];
const greaterThan2: number = arrayNumber.find(num => num > 2); // æç¤º ts(2322)
```

å…¶ä¸­ï¼ŒgreaterThan2 ä¸€å®šæ˜¯ä¸€ä¸ªæ•°å­—ï¼ˆç¡®åˆ‡åœ°è®²æ˜¯ 3ï¼‰ï¼Œå› ä¸º arrayNumber ä¸­æ˜æ˜¾æœ‰å¤§äº 2 çš„æˆå‘˜ï¼Œä½†é™æ€ç±»å‹å¯¹è¿è¡Œæ—¶çš„é€»è¾‘æ— èƒ½ä¸ºåŠ›ã€‚

åœ¨ TypeScript çœ‹æ¥ï¼ŒgreaterThan2 çš„ç±»å‹æ—¢å¯èƒ½æ˜¯æ•°å­—ï¼Œä¹Ÿå¯èƒ½æ˜¯ undefinedï¼Œæ‰€ä»¥ä¸Šé¢çš„ç¤ºä¾‹ä¸­æç¤ºäº†ä¸€ä¸ª ts(2322) é”™è¯¯ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸èƒ½æŠŠç±»å‹ undefined åˆ†é…ç»™ç±»å‹ numberã€‚

ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§ç¬ƒå®šçš„æ–¹å¼â€”â€”**ç±»å‹æ–­è¨€**ï¼ˆç±»ä¼¼ä»…ä½œç”¨åœ¨ç±»å‹å±‚é¢çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼‰å‘Šè¯‰ TypeScript æŒ‰ç…§æˆ‘ä»¬çš„æ–¹å¼åšç±»å‹æ£€æŸ¥ã€‚

æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ as è¯­æ³•åšç±»å‹æ–­è¨€ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```typescript
const arrayNumber: number[] = [1, 2, 3, 4];
const greaterThan2: number = arrayNumber.find(num => num > 2) as number;
```

**è¯­æ³•**

```typescript
// å°–æ‹¬å· è¯­æ³•
let someValue: any = "this is a string";
let strLength: number = (<string>someValue).length;

// as è¯­æ³•
let someValue: any = "this is a string";
let strLength: number = (someValue as string).length;
```

ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å°–æ‹¬å·æ ¼å¼ä¼šä¸reactä¸­JSXäº§ç”Ÿè¯­æ³•å†²çªï¼Œå› æ­¤æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ as è¯­æ³•ã€‚

å¥½äº†ï¼Œå¯¹äºä¸Šé¢`unknown ç±»å‹`èµ‹å€¼çš„ç±»å‹ä¹Ÿèƒ½è§£å†³äº†ã€‚

```typescript
function getDogName() {
 let x: unknown;
 return x;
};
const dogName = getDogName();

// ç±»å‹æ–­è¨€ 
let upName = (dogName as string).toLowerCase(); // OK

let upName = (<string>dogName).toLowerCase(); // OK
```

> å‘Šè¯‰è§£æå™¨æˆ‘å°±æ˜¯è¿™ä¸ªç±»å‹çš„å°±å¯ä»¥äº†ã€‚

### 3.14.3 éç©ºæ–­è¨€

åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶ï¼Œä¸€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ `!` å¯ä»¥ç”¨äºæ–­è¨€æ“ä½œå¯¹è±¡æ˜¯é null å’Œé undefined ç±»å‹ã€‚**å…·ä½“è€Œè¨€ï¼Œx! å°†ä» x å€¼åŸŸä¸­æ’é™¤ null å’Œ undefined ã€‚**

å…·ä½“çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š

```typescript
let mayNullOrUndefinedOrString: null | undefined | string;
mayNullOrUndefinedOrString!.toString(); // ok
mayNullOrUndefinedOrString.toString(); // ts(2531)
```

```typescript
type NumGenerator = () => number;

function myFunc(numGenerator: NumGenerator | undefined) {
  // Object is possibly 'undefined'.(2532)
  // Cannot invoke an object which is possibly 'undefined'.(2722)
  const num1 = numGenerator(); // Error
  const num2 = numGenerator!(); //OK
}
```

### 3.14.4 ç¡®å®šèµ‹å€¼æ–­è¨€

å…è®¸åœ¨å®ä¾‹å±æ€§å’Œå˜é‡å£°æ˜åé¢æ”¾ç½®ä¸€ä¸ª `!` å·ï¼Œä»è€Œå‘Šè¯‰ TypeScript è¯¥å±æ€§ä¼šè¢«æ˜ç¡®åœ°èµ‹å€¼ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£å®ƒçš„ä½œç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸ªå…·ä½“çš„ä¾‹å­ï¼š

```js
let x: number;
initialize();

// Variable 'x' is used before being assigned.(2454)
console.log(2 * x); // Error
function initialize() {
  x = 10;
}

```

å¾ˆæ˜æ˜¾è¯¥å¼‚å¸¸ä¿¡æ¯æ˜¯è¯´å˜é‡ x åœ¨èµ‹å€¼å‰è¢«ä½¿ç”¨äº†ï¼Œè¦è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¡®å®šèµ‹å€¼æ–­è¨€ï¼š

```js
let x!: number;
initialize();
console.log(2 * x); // Ok

function initialize() {
  x = 10;
}
```

é€šè¿‡ `let x!: number;` ç¡®å®šèµ‹å€¼æ–­è¨€ï¼ŒTypeScript ç¼–è¯‘å™¨å°±ä¼šçŸ¥é“è¯¥å±æ€§ä¼šè¢«æ˜ç¡®åœ°èµ‹å€¼ã€‚

## 3.15 æ€»ç»“

- ç±»å‹å£°æ˜

  - ç±»å‹å£°æ˜æ˜¯TSéå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹

  - é€šè¿‡ç±»å‹å£°æ˜å¯ä»¥æŒ‡å®šTSä¸­å˜é‡ï¼ˆå‚æ•°ã€å½¢å‚ï¼‰çš„ç±»å‹

  - æŒ‡å®šç±»å‹åï¼Œå½“ä¸ºå˜é‡èµ‹å€¼æ—¶ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å€¼æ˜¯å¦ç¬¦åˆç±»å‹å£°æ˜ï¼Œç¬¦åˆåˆ™èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™

  - ç®€è€Œè¨€ä¹‹ï¼Œç±»å‹å£°æ˜ç»™å˜é‡è®¾ç½®äº†ç±»å‹ï¼Œä½¿å¾—å˜é‡åªèƒ½å­˜å‚¨æŸç§ç±»å‹çš„å€¼

  - è¯­æ³•ï¼š

    - ```typescript
      let å˜é‡: ç±»å‹;
      
      let å˜é‡: ç±»å‹ = å€¼;
      
      function fn(å‚æ•°: ç±»å‹, å‚æ•°: ç±»å‹): ç±»å‹{
          ...
      }
      ```

- è‡ªåŠ¨ç±»å‹åˆ¤æ–­

  - TSæ‹¥æœ‰è‡ªåŠ¨çš„ç±»å‹åˆ¤æ–­æœºåˆ¶
  - å½“å¯¹å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­å˜é‡çš„ç±»å‹
  - æ‰€ä»¥å¦‚æœä½ çš„å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ—¶åŒæ—¶è¿›è¡Œçš„ï¼Œå¯ä»¥çœç•¥æ‰ç±»å‹å£°æ˜

- ç±»å‹ï¼š

  |  ç±»å‹   |       ä¾‹å­        |              æè¿°              |
  | :-----: | :---------------: | :----------------------------: |
  | number  |    1, -33, 2.5    |            ä»»æ„æ•°å­—            |
  | string  |  'hi', "hi", hi   |           ä»»æ„å­—ç¬¦ä¸²           |
  | boolean |    trueã€false    |       å¸ƒå°”å€¼trueæˆ–false        |
  | å­—é¢é‡  |      å…¶æœ¬èº«       |  é™åˆ¶å˜é‡çš„å€¼å°±æ˜¯è¯¥å­—é¢é‡çš„å€¼  |
  |   any   |         *         |            ä»»æ„ç±»å‹            |
  | unknown |         *         |         ç±»å‹å®‰å…¨çš„any          |
  |  void   | ç©ºå€¼ï¼ˆundefinedï¼‰ |     æ²¡æœ‰å€¼ï¼ˆæˆ–undefinedï¼‰      |
  |  never  |      æ²¡æœ‰å€¼       |          ä¸èƒ½æ˜¯ä»»ä½•å€¼          |
  | object  |  {name:'å­™æ‚Ÿç©º'}  |          ä»»æ„çš„JSå¯¹è±¡          |
  |  array  |      [1,2,3]      |           ä»»æ„JSæ•°ç»„           |
  |  tuple  |       [4,5]       | å…ƒç´ ï¼ŒTSæ–°å¢ç±»å‹ï¼Œå›ºå®šé•¿åº¦æ•°ç»„ |
  |  enum   |    enum{A, B}     |       æšä¸¾ï¼ŒTSä¸­æ–°å¢ç±»å‹       |

