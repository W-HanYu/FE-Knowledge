"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=({serverURL:e,lang:t,paths:r,signal:n})=>fetch(`${e}/comment?type=count&url=${encodeURIComponent(r.join(","))}&lang=${t}`,{signal:n,headers:{}}).then((e=>e.json())).then((e=>((e,t="")=>{if("object"==typeof e&&e.errno)throw new TypeError(`Fetch ${t} failed with ${e.errno}: ${e.errmsg}`);return e})(e,"comment count"))).then((e=>Array.isArray(e)?e:[e])),t=e=>{const t=((e="")=>e.replace(/\/$/u,""))(e);return/^(https?:)?\/\//.test(t)?t:`https://${t}`},r=e=>{"AbortError"!==e.name&&console.error(e.message)};exports.commentCount=({serverURL:n,path:o=window.location.pathname,selector:a=".waline-comment-count",lang:s="zh-CN"})=>{const c=new AbortController,l=document.querySelectorAll(a);return l.length&&e({serverURL:t(n),paths:Array.from(l).map((e=>(e=>{try{e=decodeURI(e)}catch(e){}return e})(e.dataset.path||e.getAttribute("id")||o))),lang:s,signal:c.signal}).then((e=>{l.forEach(((t,r)=>{t.innerText=e[r].toString()}))})).catch(r),c.abort.bind(c)},exports.version="2.13.0";
//# sourceMappingURL=comment.cjs.map
