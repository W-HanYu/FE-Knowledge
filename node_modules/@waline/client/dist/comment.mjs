const e=({serverURL:e,lang:t,paths:r,signal:n})=>fetch(`${e}/comment?type=count&url=${encodeURIComponent(r.join(","))}&lang=${t}`,{signal:n,headers:{}}).then((e=>e.json())).then((e=>((e,t="")=>{if("object"==typeof e&&e.errno)throw new TypeError(`Fetch ${t} failed with ${e.errno}: ${e.errmsg}`);return e})(e,"comment count"))).then((e=>Array.isArray(e)?e:[e])),t=e=>{const t=((e="")=>e.replace(/\/$/u,""))(e);return/^(https?:)?\/\//.test(t)?t:`https://${t}`},r=e=>{"AbortError"!==e.name&&console.error(e.message)},n=({serverURL:n,path:o=window.location.pathname,selector:a=".waline-comment-count",lang:c="zh-CN"})=>{const s=new AbortController,h=document.querySelectorAll(a);return h.length&&e({serverURL:t(n),paths:Array.from(h).map((e=>(e=>{try{e=decodeURI(e)}catch(e){}return e})(e.dataset.path||e.getAttribute("id")||o))),lang:c,signal:s.signal}).then((e=>{h.forEach(((t,r)=>{t.innerText=e[r].toString()}))})).catch(r),s.abort.bind(s)},o="2.13.0";export{n as commentCount,o as version};
//# sourceMappingURL=comment.mjs.map
